<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE — ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: src/canjs/2-define-todo/todomvc-with-steal.md
	@page guides/recipes/todomvc-with-steal
######################################################################## -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="UMCgjrWAjJW_tHmYo6AerdZvVdmh8QHdY9Ywb59tpHw" />
  <title>Bitovi University - TodoMVC with StealJS</title>
  
  <link rel="stylesheet" type="text/css" href="../../static/bundles/bit-docs-site/static.css">
  
</head>

<body>
  <div class="header">
    <div class="logo">
      <a href="https://www.bitovi.com/">Bitovi</a>
    </div>
    <ul>
      <li><a href="https://www.bitovi.com/services">Services</a></li>
      <li><a href="https://www.bitovi.com/client-work">Client Work</a></li>
      <li><a href="https://www.bitovi.com/about">Our Team</a></li>
      <li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
      <li><a href="https://www.bitovi.com/blog">Blog</a></li>
      <li><a href="../.." class="active">Academy</a></li>
     </ul>
     <a class="contact-popup hs-button brand button-smallest" href="https://www.bitovi.com/contact">Contact Us</a>
  </div>

  <div class="content">
	
		<div class="sidebar-left">
  
    

  
  <p class="border"><a href="../..#courses">View More Courses</a></p>
</div>

	
	<article class="main">
    <div class="main-content">
  		
  			<section class="title">
	<h1>TodoMVC with StealJS <code>page</code></h1>
</section>

  		

  		
  			
  				<section class="description">
    <p>This tutorial walks through building TodoMVC with StealJS. It includes KeyNote presentations
covering CanJS core libraries.</p>

</section>

  			
  		

  		
  			
  				
  			
  			
  				<section class="body">
    <h2>Setup (Framework Overview)</h2>
<h3>The problem</h3>
<ul>
<li>Setup steal to load a basic CanJS application.  A basic CanJS application has:
<ul>
<li>A custom element defined by [can-component] and
an instance of that custom element in the page's HTML. That component includes a:
<ul>
<li>A [can-define/map/map] ViewModel and an instance of that ViewModel.</li>
<li>A [can-stache] view that is rendered with the instance of the ViewModel.</li>
</ul></li>
</ul></li>
<li>In addition, this application should load the <a href="https://www.npmjs.com/package/can-todomvc-test">can-todomvc-test</a> module version 5.0 and
pass it the custom element’s <code>ViewModel</code> instance. You will need to declare the version explicitly as different versions of this guide depend on different versions of this package.</li>
</ul>
<h3>What you need to know</h3>
<ul>
<li><p>To create a new project with StealJS, run:</p>
<pre><code>npm init -y
npm install steal@2 steal-tools@2 steal-css@1 --save-dev
</code></pre></li>
<li><p>To host static files, install <code>http-server</code> and run it like:</p>
<pre><code>npm install http-server -g
http-server -c-1
</code></pre></li>
<li><p>If you load StealJS plugins, add them to your <em>package.json</em> configuration like:</p>
<pre><code>&quot;steal&quot;: {
  &quot;plugins&quot;: [
    &quot;steal-css&quot;
  ]
}
</code></pre></li>
<li><p>Define a custom element with [can-component]:</p>
<pre><code class="language-js">import {Component} from &quot;can&quot;;

Component.extend({
    tag: &quot;todo-mvc&quot;,
    view: ...,
    ViewModel: {
       ...
    }
});
</code></pre></li>
<li><p>Load a view with the [steal-stache] plugin like:</p>
<pre><code class="language-js">import view from &quot;./path/to/template.stache&quot;;
</code></pre>
<p>Note that [steal-stache] is a StealJS plugin and needs to be configured as such.</p></li>
<li><p>Add the custom element to your HTML page to see it in action:</p>
<pre><code class="language-html">&lt;todo-mvc&gt;&lt;/todo-mvc&gt;
</code></pre></li>
<li><p>Use the following HTML that a designer might have provided:</p>
<pre><code class="language-html">&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;Todos&lt;/h1&gt;
        &lt;input id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            &lt;li class=&quot;todo&quot;&gt;
                &lt;div class=&quot;view&quot;&gt;
                    &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
                    &lt;label&gt;Do the dishes&lt;/label&gt;
                    &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;Do the dishes&quot;&gt;
            &lt;/li&gt;
            &lt;li class=&quot;todo completed&quot;&gt;
                &lt;div class=&quot;view&quot;&gt;
                    &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
                    &lt;label&gt;Mow the lawn&lt;/label&gt;
                    &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;Mow the lawn&quot;&gt;
            &lt;/li&gt;
            &lt;li class=&quot;todo editing&quot;&gt;
                &lt;div class=&quot;view&quot;&gt;
                    &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
                    &lt;label&gt;Pick up dry cleaning&lt;/label&gt;
                    &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;Pick up dry cleaning&quot;&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;2&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed (1)
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;
</code></pre></li>
<li><p>Use <a href="https://www.npmjs.com/package/can-todomvc-test">can-todomvc-test</a> to load the application’s
styles and run its tests:</p>
<pre><code class="language-js">import test from &quot;can-todomvc-test&quot;;
test(appVM);
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Create a folder:</p>
<pre><code class="language-cmd">mkdir todomvc
cd todomvc
</code></pre>
<p>Host it:</p>
<pre><code>npm install http-server -g
http-server -c-1
</code></pre>
<p>Create a new project:</p>
<pre><code class="language-cmd">npm init -y
</code></pre>
<p>Install <code>steal</code>, <code>steal-tools</code>, and CanJS’s core modules:</p>
<pre><code class="language-cmd">npm install steal@2 steal-tools@2 steal-css@1 --save-dev
npm install can@5 steal-stache@4 --save
</code></pre>
<p>Add <strong>steal.plugins</strong> to <em>package.json</em>:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;todomvc&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;steal&quot;: &quot;^2.0.2&quot;,
    &quot;steal-css&quot;: &quot;^1.3.2&quot;,
    &quot;steal-tools&quot;: &quot;^2.0.2&quot;
  },
  &quot;steal&quot;: {
    &quot;plugins&quot;: [
      &quot;steal-css&quot;,&quot;can&quot;
    ]
  },
  &quot;dependencies&quot;: {
    &quot;can&quot;: &quot;^5.2.2&quot;
  }
}

</code></pre>
<div line-highlight='17-21'></div>
<p>Create the starting HTML page:</p>
<pre><code class="language-html">&lt;!-- index.html --&gt;
&lt;todo-mvc&gt;&lt;/todo-mvc&gt;
&lt;script src=&quot;./node_modules/steal/steal.js&quot; main&gt;&lt;/script&gt;
</code></pre>
<p>Create the application template:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;input id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            &lt;li class=&quot;todo&quot;&gt;
                &lt;div class=&quot;view&quot;&gt;
                    &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
                    &lt;label&gt;Do the dishes&lt;/label&gt;
                    &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;Do the dishes&quot;&gt;
            &lt;/li&gt;
            &lt;li class=&quot;todo completed&quot;&gt;
                &lt;div class=&quot;view&quot;&gt;
                    &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
                    &lt;label&gt;Mow the lawn&lt;/label&gt;
                    &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;Mow the lawn&quot;&gt;
            &lt;/li&gt;
            &lt;li class=&quot;todo editing&quot;&gt;
                &lt;div class=&quot;view&quot;&gt;
                    &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;&gt;
                    &lt;label&gt;Pick up dry cleaning&lt;/label&gt;
                    &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;Pick up dry cleaning&quot;&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;2&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed (1)
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<p>Install the test harness:</p>
<pre><code class="language-cmd">npm install can-todomvc-test@5 --save-dev
</code></pre>
<p>Create the main app</p>
<pre><code class="language-js">// index.js
import {Component} from &quot;can&quot;;
import view from &quot;./index.stache&quot;;

import test from &quot;can-todomvc-test&quot;;

Component.extend({
    tag: &quot;todo-mvc&quot;,
    view,
    ViewModel: {
        appName: {default: &quot;TodoMVC&quot;}
    }
});

const appVM = window.appVM = document.querySelector(&quot;todo-mvc&quot;).viewModel;

test(appVM);

</code></pre>
<h2>Define Todo type (DefineMap basics)</h2>
<h3>The problem</h3>
<ul>
<li>Define a <code>Todo</code> type as the export of  <em>models/todo.js</em>, where:
<ul>
<li>It is a [can-define/map/map] type.</li>
<li>The id or name property values are coerced into a string.</li>
<li>Its <code>complete</code> property is a <code>Boolean</code> that defaults to <code>false</code>.</li>
<li>It has a <code>toggleComplete</code> method that flips <code>complete</code> to the opposite value.</li>
</ul></li>
</ul>
<p>Example test code:</p>
<pre><code class="language-js">const todo = new Todo({id: 1, name: 2});
QUnit.equal(todo.id, &quot;1&quot;, &quot;id is a string&quot;);
QUnit.equal(todo.name, &quot;2&quot;, &quot;name is a string&quot;);
QUnit.equal(todo.complete, false, &quot;complete defaults to false&quot;);
todo.toggleComplete();
QUnit.equal(todo.complete, true, &quot;toggleComplete works&quot;);
</code></pre>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeUmlrN2p0Yi1qUzg">DefineMap Basics Presentation</a></p></li>
<li><p>[can-define/map/map.extend DefineMap.extend] defines a new <code>Type</code>.</p></li>
<li><p>The [can-define.types.type type] behavior defines a property’s type like:</p>
<pre><code class="language-js">DefineMap.extend({
    propertyName: {type: &quot;number&quot;}
})
</code></pre></li>
<li><p>The [can-define.types.default] behavior defines a property’s initial value like:</p>
<pre><code class="language-js">DefineMap.extend({
    propertyName: {default: 3}
})
</code></pre></li>
<li><p>Methods can be defined directly on the prototype like:</p>
<pre><code class="language-js">DefineMap.extend({
    methodName: function() {}
})
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Create <em>models/todo.js</em> as follows:</p>
<pre><code class="language-js">// models/todo.js
import {DefineMap} from &quot;can&quot;;

const Todo = DefineMap.extend(&quot;Todo&quot;, {
    id: &quot;string&quot;,
    name: &quot;string&quot;,
    complete: {
        type: &quot;boolean&quot;,
        default: false
    },
    toggleComplete() {
        this.complete = !this.complete;
    }
});

export default Todo;

</code></pre>
<h2>Define Todo.List type (DefineList basics)</h2>
<h3>The problem</h3>
<ul>
<li>Define a <code>Todo.List</code> type on the export of  <em>models/todo.js</em>, where:
<ul>
<li>It is a [can-define/list/list] type.</li>
<li>The enumerable indexes are coerced into <code>Todo</code> types.</li>
<li>Its <code>.active</code> property returns a filtered <code>Todo.List</code> of the todos that are <strong>not</strong> complete.</li>
<li>Its <code>.complete</code> property returns a filtered <code>Todo.List</code> of the todos that are complete.</li>
<li>Its <code>.allComplete</code> property true if all the todos are complete.</li>
</ul></li>
</ul>
<p>Example test code:</p>
<pre><code class="language-js">QUnit.ok(Todo.List, &quot;Defined a List&quot;);
const todos = new Todo.List([
  {complete: true},
  {},
  {complete: true}
]);
QUnit.ok(todos[0] instanceof Todo, &quot;each item in a Todo.List is a Todo&quot;);
QUnit.equal(todos.active.length, 1);
QUnit.equal(todos.complete.length, 2);
QUnit.equal(todos.allComplete, false, &quot;not allComplete&quot;);
todos[1].complete = true;
QUnit.equal(todos.allComplete, true, &quot;allComplete&quot;);
</code></pre>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeRFUzclNhTlRjMDg">DefineList Basics Presentation</a></p></li>
<li><p>[can-define/list/list.extend DefineList.extend] defines a new <code>ListType</code>.</p></li>
<li><p>The [can-define/list/list.prototype.wildcardItems] property defines the behavior of items in a list like:</p>
<pre><code class="language-js">DefineList.extend({
    &quot;#&quot;: {type: ItemType}
})
</code></pre></li>
<li><p>The [can-define.types.get] behavior defines observable computed properties like:</p>
<pre><code class="language-js">DefineMap.extend({
    propertyName: {
        get: function() {
            return this.otherProperty;
        }
    }
})
</code></pre></li>
<li><p>[can-define/list/list.prototype.filter] can be used to filter a list into a new list:</p>
<pre><code class="language-js">list = new ListType([
  // ...
]);
list.filter(function(item) {
    return test(item);
})
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>models/todo.js</em> to the following:</p>
<pre><code class="language-js">// models/todo.js
import {DefineMap, DefineList} from &quot;can&quot;;

const Todo = DefineMap.extend(&quot;Todo&quot;, {
    id: &quot;string&quot;,
    name: &quot;string&quot;,
    complete: {
        type: &quot;boolean&quot;,
        default: false
    },
    toggleComplete() {
        this.complete = !this.complete;
    }
});

Todo.List = DefineList.extend(&quot;TodoList&quot;, {
    &quot;#&quot;: Todo,
    get active() {
        return this.filter({
            complete: false
        });
    },
    get complete() {
        return this.filter({
            complete: true
        });
    },
    get allComplete() {
        return this.length === this.complete.length;
    }
});

export default Todo;

</code></pre>
<div line-highlight='2,16-31,only'></div>
<h2>Render a list of todos (can-stache)</h2>
<h3>The problem</h3>
<ul>
<li><p>Add a <code>todosList</code> property to the <code>AppViewModel</code> whose default
value will be a <code>Todo.List</code> with the following data:</p>
<pre><code class="language-js">[
  { name: &quot;mow lawn&quot;, complete: false, id: 5 },
  { name: &quot;dishes&quot;, complete: true, id: 6 },
  { name: &quot;learn canjs&quot;, complete: false, id: 7 }
]
</code></pre></li>
<li><p>Write out an <code>&lt;li&gt;</code> for each todo in <code>todosList</code>, including:</p>
<ul>
<li>write the todo’s name in the  <code>&lt;label&gt;</code></li>
<li>add <code>completed</code> in the <code>&lt;li&gt;</code>’s <code>class</code> if the todo is <code>complete</code>.</li>
<li>check the todo’s checkbox if the todo is <code>complete</code>.</li>
</ul></li>
<li><p>Write out the number of items left and completed count in the “Clear completed” button.</p></li>
</ul>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeSjVJMTRJdXRXcWs">Stache Basics Presentation</a></p></li>
<li><p>CanJS uses [can-stache] to render data in a template
and keep it live. Templates can be loaded with [steal-stache].</p>
<p>A [can-stache] template uses
[can-stache.tags.escaped {{key}}] magic tags to insert data into
the HTML output like:</p>
<pre><code class="language-html">  {{something.name}}
</code></pre></li>
<li><p>Use [can-stache.helpers.if {{#if(value)}}] to do <code>if/else</code> branching in <code>can-stache</code>.</p></li>
<li><p>Use [can-stache.helpers.for-of {{#for(of)}}] to do looping in <code>can-stache</code>.</p></li>
</ul>
<h3>The solution</h3>
<p>Update <em>index.js</em> to the following:</p>
<pre><code class="language-js">// index.js
import {Component} from &quot;can&quot;;
import view from &quot;./index.stache&quot;;
import Todo from &quot;~/models/todo&quot;;

import test from &quot;can-todomvc-test&quot;;

Component.extend({
    tag: &quot;todo-mvc&quot;,
    view,
    ViewModel: {
        appName: {default: &quot;TodoMVC&quot;},
        todosList: {
            default: function(){
                return new Todo.List([
                    { name: &quot;mow lawn&quot;, complete: false, id: 5 },
                    { name: &quot;dishes&quot;, complete: true, id: 6 },
                    { name: &quot;learn canjs&quot;, complete: false, id: 7 }
                ]);
            }
        }
    }
});

const appVM = window.appVM = document.querySelector(&quot;todo-mvc&quot;).viewModel;

test(appVM);

</code></pre>
<div line-highlight='4,13-21,only'></div>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;input id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            {{# for(todo of this.todosList) }}
                &lt;li class=&quot;todo {{# if(todo.complete) }}completed{{/ if }}&quot;&gt;
                    &lt;div class=&quot;view&quot;&gt;
                        &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;
                            {{# if(todo.complete) }}checked{{/ if }} /&gt;
                        &lt;label&gt;{{ todo.name }}&lt;/label&gt;
                        &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                    &lt;/div&gt;
                    &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;{{ todo.name }}&quot; /&gt;
                &lt;/li&gt;
            {{/ for }}
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='11-21,26,40,only'></div>
<h2>Toggle a todo’s completed state (event bindings)</h2>
<h3>The problem</h3>
<ul>
<li>Call <code>toggleComplete</code> when a todo’s checkbox is clicked upon.</li>
</ul>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeYUJ3ZVRxUlU2MjQ">The can-stache-bindings Presentation’s</a> <em>DOM Event Bindings</em></p></li>
<li><p>Use [can-stache-bindings.event on:EVENT] to listen to an event on an element and call a method in <code>can-stache</code>.  For example, the following calls <code>doSomething()</code> when the <code>&lt;div&gt;</code> is clicked.</p>
<pre><code class="language-html">&lt;div on:click=&quot;doSomething()&quot;&gt; ... &lt;/div&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;input id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            {{# for(todo of this.todosList) }}
                &lt;li class=&quot;todo {{# if(todo.complete) }}completed{{/ if }}&quot;&gt;
                    &lt;div class=&quot;view&quot;&gt;
                        &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;
                            {{# if(todo.complete) }}checked{{/ if }}
                            on:click=&quot;todo.toggleComplete()&quot; /&gt;
                        &lt;label&gt;{{ todo.name }}&lt;/label&gt;
                        &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                    &lt;/div&gt;
                    &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;{{ todo.name }}&quot; /&gt;
                &lt;/li&gt;
            {{/ for }}
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='14-16,only'></div>
<h2>Toggle a todo’s completed state (data bindings)</h2>
<h3>The problem</h3>
<ul>
<li>Update a todo’s <code>complete</code> property when the checkbox’s <code>checked</code> property changes with [can-stache-bindings.twoWay two-way bindings].</li>
</ul>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeYUJ3ZVRxUlU2MjQ">The can-stache-bindings Presentation’s</a> <em>DOM Data Bindings</em></p></li>
<li><p>Use [can-stache-bindings.twoWay value:bind] to setup a two-way binding in <code>can-stache</code>.  For example, the following keeps <code>todo.name</code> and the input’s <code>value</code> in sync:</p>
<pre><code class="language-html">&lt;input  value:bind=&quot;todo.name&quot; /&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;input id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            {{# for(todo of this.todosList) }}
                &lt;li class=&quot;todo {{# if(todo.complete) }}completed{{/ if }}&quot;&gt;
                    &lt;div class=&quot;view&quot;&gt;
                        &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;
                            checked:bind=&quot;todo.complete&quot; /&gt;
                        &lt;label&gt;{{ todo.name }}&lt;/label&gt;
                        &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                    &lt;/div&gt;
                    &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;{{ todo.name }}&quot; /&gt;
                &lt;/li&gt;
            {{/ for }}
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='14-15,only'></div>
<h2>Define Todo's identity</h2>
<h3>The problem</h3>
<ul>
<li>CanJS’s model needs to know what is the unique identifier of a type.</li>
</ul>
<h3>What you need to know</h3>
<h3>The solution</h3>
<p>Update <em>models/todo.js</em> to the following:</p>
<pre><code class="language-js">// models/todo.js
import {DefineMap, DefineList} from &quot;can&quot;;

const Todo = DefineMap.extend(&quot;Todo&quot;, {
    id: {type: &quot;string&quot;, identity: true},
    name: &quot;string&quot;,
    complete: {
        type: &quot;boolean&quot;,
        default: false
    },
    toggleComplete() {
        this.complete = !this.complete;
    }
});

Todo.List = DefineList.extend(&quot;TodoList&quot;, {
    &quot;#&quot;: Todo,
    get active() {
        return this.filter({
            complete: false
        });
    },
    get complete() {
        return this.filter({
            complete: true
        });
    },
    get allComplete() {
        return this.length === this.complete.length;
    }
});

export default Todo;

</code></pre>
<div line-highlight='5,only'></div>
<h2>Simulate the service layer (can-fixture)</h2>
<h3>The problem</h3>
<p>Simulate a service layer that handles the following requests and responses:</p>
<p><strong>GET /api/todos</strong></p>
<pre><code>-&gt; GET /api/todos

&lt;- {
    &quot;data&quot;: [
      { &quot;name&quot;: &quot;mow lawn&quot;, &quot;complete&quot;: false, &quot;id&quot;: 5 },
      { &quot;name&quot;: &quot;dishes&quot;, &quot;complete&quot;: true, &quot;id&quot;: 6 },
      { &quot;name&quot;: &quot;learn canjs&quot;, &quot;complete&quot;: false, &quot;id&quot;: 7 }
    ]
}
</code></pre>
<p>This should also support a <code>sort</code> and <code>complete</code> params like:</p>
<pre><code>-&gt; GET /api/todos?sort=name&amp;complete=true
</code></pre>
<p><strong>GET /api/todos/{id}</strong></p>
<pre><code>-&gt; GET /api/todos/5

&lt;- { &quot;name&quot;: &quot;mow lawn&quot;, &quot;complete&quot;: false, &quot;id&quot;: 5 }
</code></pre>
<p><strong>POST /api/todos</strong></p>
<pre><code>-&gt; POST /api/todos
   {&quot;name&quot;: &quot;learn can-fixture&quot;, &quot;complete&quot;: false}

&lt;- {&quot;id&quot;: 8}
</code></pre>
<p><strong>PUT /api/todos/{id}</strong></p>
<pre><code>-&gt; PUT /api/todos/8
   {&quot;name&quot;: &quot;learn can-fixture&quot;, &quot;complete&quot;: true}

&lt;- {&quot;id&quot;: 8, &quot;name&quot;: &quot;learn can-fixture&quot;, &quot;complete&quot;: true}
</code></pre>
<p><strong>DELETE /api/todos/{id}</strong></p>
<pre><code>-&gt; DELETE /api/todos/8

&lt;- {}
</code></pre>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeekROYmxvTnUtWmM">The can-fixture Presentation</a></p></li>
<li><p>[can-fixture] - is used to trap AJAX requests like:</p>
<pre><code class="language-js">fixture(&quot;/api/entities&quot;, function(request) {
  request.data.folderId //-&gt; &quot;1&quot;

  return {data: [...]}
})
</code></pre></li>
<li><p>[can-fixture.store can-fixture.store] - can be used to automatically filter records if given a [can-set.Algebra].</p>
<pre><code class="language-js">const entities = [ .... ];
const entitiesStore = fixture.store( entities, entitiesAlgebra );
fixture(&quot;/api/entities/{id}&quot;, entitiesStore);
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Create <em>models/todos-fixture.js</em> as follows:</p>
<pre><code class="language-js">// models/todos-fixture.js
import {fixture} from &quot;can&quot;;
import Todo from &quot;./todo&quot;;

const todoStore = fixture.store([
    { name: &quot;mow lawn&quot;, complete: false, id: &quot;5&quot; },
    { name: &quot;dishes&quot;, complete: true, id: &quot;6&quot; },
    { name: &quot;learn canjs&quot;, complete: false, id: &quot;7&quot; }
], Todo);

fixture(&quot;/api/todos/{id}&quot;, todoStore);
fixture.delay = 500;

export default todoStore;

</code></pre>
<h2>Connect the Todo model to the service layer (can-connect)</h2>
<h3>The problem</h3>
<ul>
<li>Decorate <code>Todo</code> with methods so it can get, create, updated, and delete todos at the <code>/api/todos</code> service.  Specifically:
<ul>
<li><code>Todo.getList()</code> which calls <code>GET /api/todos</code></li>
<li><code>Todo.get({id: 5})</code> which calls <code>GET /api/todos/5</code></li>
<li><code>todo.save()</code> which calls <code>POST /api/todos</code> if <code>todo</code> doesn’t have an <code>id</code> or <code>PUT /api/todos/{id}</code> if the <code>todo</code> has an id.</li>
<li><code>todo.destroy()</code> which calls <code>DELETE /api/todos/5</code></li>
</ul></li>
</ul>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZebHFWMElNOVEwSlE">The can-connect Presentation</a> up to and including <em>Migrate 2 can-connect</em>.</p></li>
<li><p>[can-connect/can/base-map/base-map] can decorate a <code>DefineMap</code> with methods that connect it to a restful URL like:</p>
<pre><code class="language-js">baseMap({
  Map: Type,
  url: &quot;URL&quot;,
  algebra: algebra
})
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>models/todo.js</em> to the following:</p>
<pre><code class="language-js">// models/todo.js
import {DefineMap, DefineList, realtimeRestModel} from &quot;can&quot;;

const Todo = DefineMap.extend(&quot;Todo&quot;, {
    id: {type: &quot;string&quot;, identity: true},
    name: &quot;string&quot;,
    complete: {
        type: &quot;boolean&quot;,
        default: false
    },
    toggleComplete() {
        this.complete = !this.complete;
    }
});

Todo.List = DefineList.extend(&quot;TodoList&quot;, {
    &quot;#&quot;: Todo,
    get active() {
        return this.filter({
            complete: false
        });
    },
    get complete() {
        return this.filter({
            complete: true
        });
    },
    get allComplete() {
        return this.length === this.complete.length;
    }
});

Todo.connection = realtimeRestModel({
    url: &quot;/api/todos/{id}&quot;,
    Map: Todo,
    List: Todo.List
});

export default Todo;

</code></pre>
<div line-highlight='2,33-37,only'></div>
<h2>List todos from the service layer (can-connect use)</h2>
<h3>The problem</h3>
<p>Get all <code>todos</code> from the service layer using the &quot;connected&quot; <code>Todo</code> type.</p>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZebHFWMElNOVEwSlE">The can-connect Presentation</a> up to and including <em>Important Interfaces</em>.</p></li>
<li><p>[can-connect/can/map/map.getList Type.getList] gets data using the
[can-connect/connection.getList connection’s getList] and returns a
promise that resolves to the <code>Type.List</code> of instances:</p>
<pre><code class="language-js">Type.getList({}).then(function(list) {

})
</code></pre></li>
<li><p>An async [can-define.types.get getter] property behavior can be used
to &quot;set&quot; a property to an initial value:</p>
<pre><code class="language-js">property: {
    get: function(lastSet, resolve) {
        SOME_ASYNC_METHOD( function callback(data) {
            resolve(data);
        });
    }
}
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>index.js</em> to the following:</p>
<pre><code class="language-js">// index.js
import {Component} from &quot;can&quot;;
import view from &quot;./index.stache&quot;;
import Todo from &quot;~/models/todo&quot;;
import &quot;~/models/todos-fixture&quot;;
import test from &quot;can-todomvc-test&quot;;

Component.extend({
    tag: &quot;todo-mvc&quot;,
    view,
    ViewModel: {
        appName: {default: &quot;TodoMVC&quot;},
        todosList: {
            get: function(lastSet, resolve) {
                Todo.getList({}).then(resolve);
            }
        }
    }
});

const appVM = window.appVM = document.querySelector(&quot;todo-mvc&quot;).viewModel;

test(appVM);

</code></pre>
<div line-highlight='5,13-17,only'></div>
<h2>Toggling a todo’s checkbox updates service layer (can-connect use)</h2>
<h3>The problem</h3>
<p>Update the service layer when a todo’s completed status
changes. Also, disable the checkbox while the update is happening.</p>
<h3>What you need to know</h3>
<ul>
<li><p>Call [can-connect/can/map/map.prototype.save] to update a &quot;connected&quot;
<code>Map</code> instance:</p>
<pre><code>map.save();
</code></pre>
<p><code>save()</code> can also be called by an [can-stache-bindings.event] binding.</p></li>
<li><p>[can-connect/can/map/map.prototype.isSaving] returns true when <code>.save()</code>
has been called, but has not resolved yet.</p>
<pre><code>map.isSaving()
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;input id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            {{# for(todo of this.todosList) }}
                &lt;li class=&quot;todo {{# if(todo.complete) }}completed{{/ if }}&quot;&gt;
                    &lt;div class=&quot;view&quot;&gt;
                        &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;
                            checked:bind=&quot;todo.complete&quot;
                            on:change=&quot;todo.save()&quot;
                            disabled:from=&quot;todo.isSaving()&quot; /&gt;
                        &lt;label&gt;{{ todo.name }}&lt;/label&gt;
                        &lt;button class=&quot;destroy&quot;&gt;&lt;/button&gt;
                    &lt;/div&gt;
                    &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;{{ todo.name }}&quot; /&gt;
                &lt;/li&gt;
            {{/ for }}
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='16-17,only'></div>
<h2>Delete todos in the page (can-connect use)</h2>
<h3>The problem</h3>
<p>When a todo’s <strong>destroy</strong> button is clicked, we need to delete the
todo on the server and remove the todo’s element from the page. While
the todo is being destroyed, add <code>destroying</code> to the todo’s <code>&lt;li&gt;</code>’s <code>class</code>
attribute.</p>
<h3>Things to know</h3>
<ul>
<li><p>The remaining parts of the <a href="https://drive.google.com/open?id=0Bx-kNqf-wxZebHFWMElNOVEwSlE">can-connect Presentation</a>, with an emphasis on how [can-connect/real-time/real-time] behavior works.</p></li>
<li><p>Delete a record on the server with [can-connect/can/map/map.prototype.destroy] like:</p>
<pre><code class="language-js">map.destroy()
</code></pre></li>
<li><p>[can-connect/can/map/map.prototype.isDestroying] returns true when <code>.destroy()</code>
has been called, but has not resolved yet.</p>
<pre><code class="language-js">map.isDestroying()
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;input id=&quot;new-todo&quot; placeholder=&quot;What needs to be done?&quot;&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            {{# for(todo of this.todosList) }}
                &lt;li class=&quot;todo {{# if(todo.complete) }}completed{{/ if }}
                    {{# if(todo.isDestroying()) }}destroying{{/ if }}&quot;&gt;
                    &lt;div class=&quot;view&quot;&gt;
                        &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;
                            checked:bind=&quot;todo.complete&quot;
                            on:change=&quot;todo.save()&quot;
                            disabled:from=&quot;todo.isSaving()&quot; /&gt;
                        &lt;label&gt;{{ name }}&lt;/label&gt;
                        &lt;button class=&quot;destroy&quot; on:click=&quot;todo.destroy()&quot;&gt;&lt;/button&gt;
                    &lt;/div&gt;
                    &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;{{ todo.name }}&quot; /&gt;
                &lt;/li&gt;
            {{/ for }}
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='13,20,only'></div>
<h2>Create todos (can-component)</h2>
<h3>The problem</h3>
<p>Make it possible to create a todo, update the service layer
and show the todo in the list of todos.</p>
<p>This functionality should be encapsulated by a <code>&lt;todo-create/&gt;</code>
custom element.</p>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeMnlHZzB6ZERUSEk">The can-component presentation</a> up to and including how to <em>define a component</em>.</p></li>
<li><p>A [can-component] combines a custom tag name, [can-stache] view and a [can-define/map/map] ViewModel like:</p>
<pre><code class="language-js">import Component from &quot;can-component&quot;;
import view from &quot;./template.stache&quot;;
const ViewModel = DefineMap.extend({
  ...      
});

Component.extend({
    tag: &quot;some-component&quot;,
    view: view,
    ViewModel: ViewModel
});
</code></pre></li>
<li><p>You can use <code>on:enter</code> to listen to when the user hits the <strong>enter</strong> key.</p></li>
<li><p>Listening to the <code>enter</code> event can be enabled by [can-event-dom-enter/add-global/add-global].</p></li>
<li><p>The [can-define.types.defaultConstructor] behavior creates a default value by using <code>new Default</code> to initialize the value when
a <code>DefineMap</code> property is read for the first time.</p>
<pre><code class="language-js">const SubType = DefineMap.extend({})
const Type = DefineMap.extend({
    property: {Default: SubType}
})

const map = new Type();
map.property instanceof SubType //-&gt; true
</code></pre></li>
<li><p>Use [can-view-import] to import a module from a template like:</p>
<pre><code>&lt;can-import from=&quot;~/components/some-component/&quot; /&gt;
&lt;some-component&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Create <em>components/todo-create/todo-create.js</em> as follows:</p>
<pre><code class="language-js">import {Component, enterEvent, domEvents} from &quot;can&quot;;
import Todo from &quot;~/models/todo&quot;;

domEvents.addEvent(enterEvent);

export default Component.extend({
    tag: &quot;todo-create&quot;,
    view: `
        &lt;input id=&quot;new-todo&quot;
            placeholder=&quot;What needs to be done?&quot;
            value:bind=&quot;todo.name&quot;
            on:enter=&quot;createTodo()&quot; /&gt;
    `,
    ViewModel: {
        todo: {
            Default: Todo
        },
        createTodo() {
            this.todo.save().then(function() {
                this.todo = new Todo();
            }.bind(this));
        }
    }
});

</code></pre>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;can-import from=&quot;~/components/todo-create/&quot; /&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;todo-create/&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;ul id=&quot;todo-list&quot;&gt;
            {{# for(todo of this.todosList) }}
                &lt;li class=&quot;todo {{# if(todo.complete) }}completed{{/ if }}
                    {{# if(todo.isDestroying()) }}destroying{{/ if }}&quot;&gt;
                    &lt;div class=&quot;view&quot;&gt;
                        &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;
                            checked:bind=&quot;todo.complete&quot;
                            on:change=&quot;todo.save()&quot;
                            disabled:from=&quot;todo.isSaving()&quot; /&gt;
                        &lt;label&gt;{{ todo.name }}&lt;/label&gt;
                        &lt;button class=&quot;destroy&quot; on:click=&quot;todo.destroy()&quot;&gt;&lt;/button&gt;
                    &lt;/div&gt;
                    &lt;input class=&quot;edit&quot; type=&quot;text&quot; value=&quot;{{ todo.name }}&quot; /&gt;
                &lt;/li&gt;
            {{/ for }}
        &lt;/ul&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='2,6,only'></div>
<h2>Edit todo names (can-stache-bindings)</h2>
<h3>The problem</h3>
<p>Make it possible to edit a <code>todos</code> name by
double-clicking its label which should reveal
a <em>focused</em> input element.  If the user hits
the <strong>enter</strong> key, the todo should be updated on the
server.  If the input loses focus, it should go
back to the default list view.</p>
<p>This functionality should be encapsulated by a <code>&lt;todo-list {todos} /&gt;</code>
custom element.  It should accept a <code>todos</code> property that
is the list of todos that will be managed by the custom element.</p>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeYUJ3ZVRxUlU2MjQ">The can-stache-bindings presentation</a> on <em>data bindings</em>.</p></li>
<li><p>The [can-util/dom/attr/attr.special.focused] custom attribute can be used to specify when an element should be focused:</p>
<pre><code class="language-html">focused:from=&quot;shouldBeFocused()&quot;
</code></pre></li>
<li><p>Use [can-stache-bindings.toChild] to pass a value from the scope to a component:</p>
<pre><code>&lt;some-component nameInComponent:from=&quot;nameInScope&quot; /&gt;
</code></pre></li>
<li><p>[can-stache/keys/this] can be used to get the current context in stache:</p>
<pre><code class="language-html">&lt;div on:click=&quot;doSomethingWith(this)&quot; /&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Create <em>components/todo-list/todo-list.stache</em> as follows:</p>
<pre><code class="language-html">&lt;!-- components/todo-list/todo-list.stache --&gt;
&lt;ul id=&quot;todo-list&quot;&gt;
    {{# for(todo of this.todos) }}
        &lt;li class=&quot;todo {{# if(todo.complete) }}completed{{/ if }}
            {{# if( todo.isDestroying() ) }}destroying{{/ if }}
            {{# if(this.isEditing(todo)) }}editing{{/ if }}&quot;&gt;
            &lt;div class=&quot;view&quot;&gt;
                &lt;input class=&quot;toggle&quot; type=&quot;checkbox&quot;
                    checked:bind=&quot;todo.complete&quot;
                    on:change=&quot;todo.save()&quot;
                    disabled:from=&quot;todo.isSaving()&quot; /&gt;
                &lt;label on:dblclick=&quot;this.edit(todo)&quot;&gt;{{ todo.name }}&lt;/label&gt;
                &lt;button class=&quot;destroy&quot; on:click=&quot;todo.destroy()&quot;&gt;&lt;/button&gt;
            &lt;/div&gt;
            &lt;input class=&quot;edit&quot; type=&quot;text&quot;
                value:bind=&quot;todo.name&quot;
                on:enter=&quot;this.updateName()&quot;
                focused:from=&quot;this.isEditing(todo)&quot;
                on:blur=&quot;this.cancelEdit()&quot; /&gt;
        &lt;/li&gt;
    {{/ for }}
&lt;/ul&gt;

</code></pre>
<p>Create <em>components/todo-list/todo-list.js</em> as follows:</p>
<pre><code class="language-js">// components/todo-list/todo-list.js
import {Component} from &quot;can&quot;;
import view from &quot;./todo-list.stache&quot;;
import Todo from &quot;~/models/todo&quot;;

export default Component.extend({
    tag: &quot;todo-list&quot;,
    view,
    ViewModel: {
        todos: Todo.List,
        editing: Todo,
        backupName: &quot;string&quot;,
        isEditing(todo) {
            return todo === this.editing;
        },
        edit(todo) {
            this.backupName = todo.name;
            this.editing = todo;
        },
        cancelEdit() {
            if (this.editing) {
                this.editing.name = this.backupName;
            }
            this.editing = null;
        },
        updateName() {
            this.editing.save();
            this.editing = null;
        }
    }
});

</code></pre>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;can-import from=&quot;~/components/todo-create/&quot; /&gt;
&lt;can-import from=&quot;~/components/todo-list/&quot; /&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;todo-create/&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;todo-list todos:from=&quot;this.todosList&quot; /&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='3,12,only'></div>
<h2>Toggle all todos complete state (DefineMap setter)</h2>
<h3>The problem</h3>
<p>Make the “toggle all” checkbox work.  It should be
unchecked if a single todo is unchecked and checked
if all todos are checked.</p>
<p>When the “toggle all” checkbox is changed, the
application should update every todo to match
the status of the “toggle all” checkbox.</p>
<p>The “toggle all” checkbox should be disabled if a
single todo is saving.</p>
<h3>What you need to know</h3>
<ul>
<li><p>Using [can-define.types.set setters] and [can-define.types.get getters] a virtual property
can be simulated like:</p>
<pre><code class="language-js">DefineMap.extend({
    first: &quot;string&quot;,
    last: &quot;string&quot;,
    get fullName() {
        return this.first + &quot; &quot; + this.last;
    },
    set fullName(newValue) {
        const parts = newValue.split(&quot; &quot;);
        this.first = parts[0];
        this.last = parts[1];
    }
})
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>models/todo.js</em> to the following:</p>
<pre><code class="language-js">// models/todo.js
import {DefineMap, DefineList, realtimeRestModel} from &quot;can&quot;;

const Todo = DefineMap.extend(&quot;Todo&quot;, {
    id: {type: &quot;string&quot;, identity: true},
    name: &quot;string&quot;,
    complete: {
        type: &quot;boolean&quot;,
        default: false
    },
    toggleComplete() {
        this.complete = !this.complete;
    }
});

Todo.List = DefineList.extend(&quot;TodoList&quot;, {
    &quot;#&quot;: Todo,
    get active() {
        return this.filter({
            complete: false
        });
    },
    get complete() {
        return this.filter({
            complete: true
        });
    },
    get allComplete() {
        return this.length === this.complete.length;
    },
    get saving() {
        return this.filter(function(todo) {
            return todo.isSaving();
        });
    },
    updateCompleteTo(value) {
        this.forEach(function(todo) {
            todo.complete = value;
            todo.save();
        });
    }
});

Todo.connection = realtimeRestModel({
    url: &quot;/api/todos/{id}&quot;,
    Map: Todo,
    List: Todo.List
});

export default Todo;

</code></pre>
<div line-highlight='31-41,only'></div>
<p>Update <em>index.js</em> to the following:</p>
<pre><code class="language-js">// index.js
import {Component} from &quot;can&quot;;
import view from &quot;./index.stache&quot;;
import Todo from &quot;~/models/todo&quot;;
import &quot;~/models/todos-fixture&quot;;
import test from &quot;can-todomvc-test&quot;;

Component.extend({
    tag: &quot;todo-mvc&quot;,
    view,
    ViewModel: {
        appName: {default: &quot;TodoMVC&quot;},
        todosList: {
            get: function(lastSet, resolve) {
                Todo.getList({}).then(resolve);
            }
        },
        get allChecked() {
            return this.todosList &amp;&amp; this.todosList.allComplete;
        },
        set allChecked(newVal) {
            this.todosList &amp;&amp; this.todosList.updateCompleteTo(newVal);
        }
    }
});

const appVM = window.appVM = document.querySelector(&quot;todo-mvc&quot;).viewModel;

test(appVM);

</code></pre>
<div line-highlight='18-23,only'></div>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;can-import from=&quot;~/components/todo-create/&quot; /&gt;
&lt;can-import from=&quot;~/components/todo-list/&quot; /&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;todo-create/&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;
            checked:bind=&quot;this.allChecked&quot;
            disabled:from=&quot;this.todosList.saving.length&quot; /&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;todo-list todos:from=&quot;this.todosList&quot; /&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='10-12,only'></div>
<h2>Clear completed todo’s (event bindings)</h2>
<h3>The problem</h3>
<p>Make the &quot;Clear completed&quot; button work. When the button is clicked, It should destroy each completed todo.</p>
<h3>What you need to know</h3>
<ul>
<li><p><a href="https://drive.google.com/open?id=0Bx-kNqf-wxZeYUJ3ZVRxUlU2MjQ">The can-stache-bindings Presentation’s</a> <em>DOM Event Bindings</em></p></li>
<li><p>Use [can-stache-bindings.event on:EVENT] to listen to an event on an element and call a method in <code>can-stache</code>.  For example, the following calls <code>doSomething()</code> when the <code>&lt;div&gt;</code> is clicked.</p>
<pre><code class="language-html">&lt;div on:click=&quot;doSomething()&quot;&gt; ... &lt;/div&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>models/todo.js</em> to the following:</p>
<pre><code class="language-js">// models/todo.js
import {DefineMap, DefineList, realtimeRestModel} from &quot;can&quot;;

const Todo = DefineMap.extend(&quot;Todo&quot;, {
    id: {type: &quot;string&quot;, identity: true},
    name: &quot;string&quot;,
    complete: {
        type: &quot;boolean&quot;,
        default: false
    },
    toggleComplete() {
        this.complete = !this.complete;
    }
});

Todo.List = DefineList.extend(&quot;TodoList&quot;, {
    &quot;#&quot;: Todo,
    get active() {
        return this.filter({
            complete: false
        });
    },
    get complete() {
        return this.filter({
            complete: true
        });
    },
    get allComplete() {
        return this.length === this.complete.length;
    },
    get saving() {
        return this.filter(function(todo) {
            return todo.isSaving();
        });
    },
    updateCompleteTo(value) {
        this.forEach(function(todo) {
            todo.complete = value;
            todo.save();
        });
    },
    destroyComplete(){
        this.complete.forEach(function(todo){
            todo.destroy();
        });
    }
});

Todo.connection = realtimeRestModel({
    url: &quot;/api/todos/{id}&quot;,
    Map: Todo,
    List: Todo.List
});

export default Todo;

</code></pre>
<div line-highlight='42-46,only'></div>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;can-import from=&quot;~/components/todo-create/&quot; /&gt;
&lt;can-import from=&quot;~/components/todo-list/&quot; /&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;todo-create/&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;
            checked:bind=&quot;this.allChecked&quot;
            disabled:from=&quot;this.todosList.saving.length&quot; /&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;todo-list todos:from=&quot;this.todosList&quot; /&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ this.todosList.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a class=&quot;selected&quot; href=&quot;#!&quot;&gt;All&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!active&quot;&gt;Active&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;#!completed&quot;&gt;Completed&lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;
            on:click=&quot;this.todosList.destroyComplete()&quot;&gt;
            Clear completed ({{ this.todosList.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='31-32,only'></div>
<h2>Set up routing (can-route)</h2>
<p>Make it so that the following URLs display the corresponding
todos:</p>
<ul>
<li><code>#!</code> or <code></code> - All todos</li>
<li><code>#!active</code> - Only the incomplete todos</li>
<li><code>#!complete</code> - Only the completed todos</li>
</ul>
<p>Also, the <em>All</em>, <em>Active</em>, and <em>Completed</em> buttons should
link to those pages and a <code>class=&quot;selected&quot;</code> property should
be added if they represent the current page.</p>
<h3>What you need to know</h3>
<ul>
<li><p>[can-route] is used to connect a <code>DefineMap</code>’s properties
to the URL.  This is done with [can-route.data] like:</p>
<pre><code class="language-js">route.data = new DefineMap();
</code></pre></li>
<li><p>[can-route] can create pretty routing rules.  For example,
if <code>#!login</code> should set the <code>page</code> property of the
<code>AppViewModel</code> to <code>&quot;login&quot;</code>, use <code>route.register()</code> like:</p>
<pre><code class="language-js">route.register(&quot;{page}&quot;);
</code></pre></li>
<li><p>[can-route.start] initializes the connection between the
URL and the <code>AppViewModel</code>.  After you’ve created all
your application’s pretty routing rules, call it like:</p>
<pre><code class="language-js">route.start()
</code></pre></li>
<li><p>The [can-stache-route-helpers] module provides helpers
that use [can-route].</p>
<p>[can-stache-route-helpers.routeCurrent]
returns truthy if the current route matches its first parameters properties.</p>
<pre><code class="language-html">{{#if(routeCurrent(page='login',true))}}
  You are on the login page.
{{/if}}
</code></pre>
<p>[can-stache-route-helpers.routeUrl] returns a URL that will
set its first parameters properties:</p>
<pre><code>&lt;a href=&quot;{{routeUrl(page='login')}}&quot;&gt;Login&lt;/a&gt;
</code></pre></li>
</ul>
<h3>The solution</h3>
<p>Update <em>index.js</em> to the following:</p>
<pre><code class="language-js">// index.js
import {Component, route, DefineMap} from &quot;can&quot;;
import view from &quot;./index.stache&quot;;
import Todo from &quot;~/models/todo&quot;;
import &quot;~/models/todos-fixture&quot;;
import test from &quot;can-todomvc-test&quot;;


route.register(&quot;{filter}&quot;);

Component.extend({
    tag: &quot;todo-mvc&quot;,
    view,
    ViewModel: {
        appName: {default: &quot;TodoMVC&quot;},
        routeData: {
            default(){
                route.start();
                return route.data;
            }
        },
        allTodos: {
            get: function(lastSet, resolve) {
                Todo.getList({}).then(resolve);
            }
        },
        get todosList() {
            if(this.allTodos) {
                if(this.routeData.filter === &quot;complete&quot;) {
                    return this.allTodos.complete;
                } else if(this.routeData.filter === &quot;active&quot;) {
                    return this.allTodos.active;
                } else {
                    return this.allTodos;
                }
            }
        },
        get allChecked() {
            return this.todosList &amp;&amp; this.todosList.allComplete;
        },
        set allChecked(newVal) {
            this.todosList &amp;&amp; this.todosList.updateCompleteTo(newVal);
        }
    }
});

const appVM = window.appVM = document.querySelector(&quot;todo-mvc&quot;).viewModel;

test(appVM);

</code></pre>
<div line-highlight='2,9,16-37,only'></div>
<p>Update <em>index.stache</em> to the following:</p>
<pre><code class="language-html">&lt;!-- index.stache --&gt;
&lt;can-import from=&quot;~/components/todo-create/&quot; /&gt;
&lt;can-import from=&quot;~/components/todo-list/&quot; /&gt;
&lt;can-import from=&quot;can-stache-route-helpers&quot; /&gt;
&lt;section id=&quot;todoapp&quot;&gt;
    &lt;header id=&quot;header&quot;&gt;
        &lt;h1&gt;{{ this.appName }}&lt;/h1&gt;
        &lt;todo-create/&gt;
    &lt;/header&gt;
    &lt;section id=&quot;main&quot; class=&quot;&quot;&gt;
        &lt;input id=&quot;toggle-all&quot; type=&quot;checkbox&quot;
          checked:bind=&quot;this.allChecked&quot;
          disabled:from=&quot;this.todosList.saving.length&quot; /&gt;
        &lt;label for=&quot;toggle-all&quot;&gt;Mark all as complete&lt;/label&gt;
        &lt;todo-list todos:from=&quot;this.todosList&quot; /&gt;
    &lt;/section&gt;
    &lt;footer id=&quot;footer&quot; class=&quot;&quot;&gt;
        &lt;span id=&quot;todo-count&quot;&gt;
            &lt;strong&gt;{{ allTodos.active.length }}&lt;/strong&gt; items left
        &lt;/span&gt;
        &lt;ul id=&quot;filters&quot;&gt;
            &lt;li&gt;
                &lt;a href=&quot;{{ routeUrl(filter=undefined) }}&quot;
                    {{# routeCurrent(filter=undefined) }}class='selected'{{/ routeCurrent }}&gt;
                    All
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;{{ routeUrl(filter='active') }}&quot;
                    {{# routeCurrent(filter='active') }}class='selected'{{/ routeCurrent }}&gt;
                    Active
                &lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;a href=&quot;{{ routeUrl(filter='complete') }}&quot;
                    {{# routeCurrent(filter='complete') }}class='selected'{{/ routeCurrent }}&gt;
                    Completed
                &lt;/a&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;button id=&quot;clear-completed&quot;
            on:click=&quot;allTodos.destroyComplete()&quot;&gt;
            Clear completed ({{ allTodos.complete.length }})
        &lt;/button&gt;
    &lt;/footer&gt;
&lt;/section&gt;

</code></pre>
<div line-highlight='4,23-26,29-32,35-38,only'></div>
<p><strong>Success!</strong> You’ve completed this guide. Have questions or comments?
<a href="https://www.bitovi.com/community/slack">Join our Slack</a> and let us know in the <a href="https://bitovi-community.slack.com/messages/CFC22NZ8A">#canjs channel</a>
or our <a href="https://forums.bitovi.com/c/canjs">forums</a>!</p>

</section>

  			
  		
    </div>

    
      <div class="sidebar-right">
        <div class="content-nav on-this-page-container">
          <h6>On this page...</h6>
          <div class="list-items" id="scroll-toc">
            <bit-toc heading-container-selector="article.main" scroll-selector="#scroll-toc"></bit-toc>
          </div>
        </div>
        <div class="pullout slack">
          <h6>Get help</h6>
          <p>If you need help with an exercise, please reach out to us on
             <a href="https://join.slack.com/t/bitovi-community/shared_invite/enQtNTIzMTE5NzYxMjA3LWMwMzE4MjFkMTI5ZmZjNzllYjc2MzcxOWNmOTg3YjI4NjE0MGFkZGNkOTNlZjlkNDBhNTlmYTcwMzJlZDZjY2Y">Slack</a></p>
             <!--<a href="https://join.slack.com/t/bitovi-community/shared_invite/enQtNTIzMTE5NzYxMjA3LWMwMzE4MjFkMTI5ZmZjNzllYjc2MzcxOWNmOTg3YjI4NjE0MGFkZGNkOTNlZjlkNDBhNTlmYTcwMzJlZDZjY2Y"><img src="https://i.ibb.co/XS6n24B/slack.png"/></a>-->
        </div>
        <div class="pullout bug">
          <p>If you find a bug, please
             <a href="https://github.com/bitovi/university/issues/new">create an issue</a> or email
             <a href="mailto:contact@bitovi.com?Subject=Training%20Suggestion" target="_blank">contact@bitovi.com<a/></p>
        </div>
      </div>
    

	</article>
</div>


  <footer></footer>

  <script type="text/javascript">
    var docObject = {"src":{"path":"src/canjs/2-define-todo/todomvc-with-steal.md"},"description":"This tutorial walks through building TodoMVC with StealJS. It includes KeyNote presentations\ncovering CanJS core libraries.\n\n","name":"guides/recipes/todomvc-with-steal","title":"TodoMVC with StealJS","type":"page","parent":"guides/recipes","comment":" ","pathToRoot":"../../.."};
  </script>

  
    <script>
      steal = {
        instantiated: {
          "bundles/bit-docs-site/static.css!$css" : null
        }
      }
    </script>
    <script type='text/javascript'
        data-main="bit-docs-site/static"
        src="../../static/steal.production.js"></script>
  

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2302003-29"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-2302003-29');
</script>

</body>
</html>

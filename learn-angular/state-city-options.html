<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE — ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: src/angular/8-state-city-options/state-city-options.md
	@page learn-angular/state-city-options
######################################################################## -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="UMCgjrWAjJW_tHmYo6AerdZvVdmh8QHdY9Ywb59tpHw" />
  <meta name="description" content="Learn how to create a Reactive Form with Angular. We will create a Reactive Form in the Restaurant component with city and state dropdown inputs. 
">
  <title>Bitovi Academy - City &amp; State Options</title>
  
  <link rel="stylesheet" type="text/css" href="../static/bundles/bit-docs-site/static.css">
  
</head>

<body>
  <div class="header">
    <div class="logo">
      <a href="https://www.bitovi.com/">Bitovi</a>
    </div>
    <ul>
      <li><a href="https://www.bitovi.com/services">Services</a></li>
      <li><a href="https://www.bitovi.com/client-work">Client Work</a></li>
      <li><a href="https://www.bitovi.com/about">Our Team</a></li>
      <li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
      <li><a href="https://www.bitovi.com/blog">Blog</a></li>
      <li><a href=".." class="active">Academy</a></li>
     </ul>
     <a class="contact-popup hs-button brand button-smallest" href="https://www.bitovi.com/contact">Contact Us</a>
  </div>

  <div class="content">
	
		<div class="sidebar-left">
  
    
	<ul>
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-advanced-javascript.html"
							title="This course covers all the hard but important stuff you should know when learning JavaScript.">
							Advanced JavaScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-dom-jquery.html"
							title="Learn jQuery and the DOM APIs by building your own version of jQuery and using it to make a basic tabs widget.">
							DOM and jQuery
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-to-debug-javascript.html"
							title="This course covers the basics of JavaScript debugging.">
							Debug JavaScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-typescript.html"
							title="This course covers the basic essentials of TypeScript. At the end, you should be ready to develop projects in TypeScript.">
							Learn TypeScript
						</a>
						
					</li>
				
			
		
			
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-web-components.html"
							title="">
							Learn Web Components
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-rxjs.html"
							title="Learn RxJS by creating a validating credit card form.">
							Learn RxJS
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-canjs.html"
							title="This tutorial walks through building TodoMVC with StealJS. It includes KeyNote presentations
covering CanJS core libraries.">
							Learn CanJS
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../training.html"
							title="Learn how to prepare and give a training.">
							Giving a Training
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						parent
           						expanded">
						<a class="page"
							href="../learn-angular.html"
							title="Learn how to build a moderately complex application with Angular.">
							Learn Angular
						</a>
						
							
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="why-angular.html"
							title="Why Angular is a great choice for modern web application development.">
							Why Angular
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="building-our-first-app.html"
							title="Learn how to generate an Angular application with it&#x27;s command line interface (CLI).">
							Generate an App
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="creating-components.html"
							title="Learn how to create basic components in Angular and iterate through data using an Angular for loop.">
							Creating Components
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="creating-pipes.html"
							title="Learn how to create a custom pipe in Angular that returns a modified version of a string.">
							Creating Pipes
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="adding-routing.html"
							title="Learn how to add basic routing to components in an Angular application.">
							Adding Routing
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="creating-navigation.html"
							title="Learn how to create dynamic links with Angular that navigate to different parts of an application.">
							Creating Navigation
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="restaurant-service.html"
							title="Learn how to write an Angular service that gets data from the server.">
							Writing a Restaurant Service
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="pull-restaurant-data-into-view.html"
							title="Learn how to render API data into HTML with a view.">
							Use Restaurant API data
						</a>
						
					</li>
				
			
		
			
				
					<li class="current
           						parent
           						expanded">
						<a class="page"
							href="state-city-options.html"
							title="Learn how to create a Reactive Form with Angular. We will create a Reactive Form in the Restaurant component with city and state dropdown inputs.">
							City &amp; State Options
						</a>
						
							

						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="form-value-changes.html"
							title="Learn how to listen to form value changes with Angular.">
							Filter Cities by State
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="updating-service-params.html"
							title="Learn  how to make a service take multiple parameters.">
							Filter Restaurants by City
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="declarative-state.html"
							title="Modify Restaurants component to derive state via RxJS streams">
							Optional: Declarative State
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="writing-unit-tests.html"
							title="Write a unit test for a service in Angular">
							Writing Unit Tests
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="nested-routes.html"
							title="Creating nested restaurant routes">
							Nested Restaurant Routes
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="building-order-form.html"
							title="Building the Order Form">
							Building the Order Form
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="order-service.html"
							title="Writing the Order Service">
							Order Service
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="order-history-component.html"
							title="Writing the Order History Component">
							Order History Component
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="real-time-connection.html"
							title="Updating Order History View with Real Time Connection">
							Real Time Connections
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="deploy-app.html"
							title="Deploying App">
							Deploy App
						</a>
						
					</li>
				
			
		
	</ul>


						
					</li>
				
			
		
	</ul>


  
  <p class="border">
      <a href="..#courses">View More Courses</a>
      <a class='bit-academy-fullscreen' title='fullscreen' href="javascript://">[ ]</a>
  </p>
</div>

	
	<article class="main">
    <div class="main-content">
  		
  			<section class="title">
	<h1>City &amp; State Options <code>page</code></h1>
</section>

  		

  		
  			
  				<section class="description">
    <p>Learn how to create a Reactive Form with Angular. We will create a Reactive Form in the Restaurant component with city and state dropdown inputs.</p>

</section>

  			
  		

  		
  			
  				
  			
  			
  				<section class="body">
    <h2>Overview</h2>
<p>In this part, we will:</p>
<ul>
<li>Learn About Reactive Forms</li>
<li>Import ReactiveFormsModule into our root app</li>
<li>Create a reactive form in our Restaurant Component</li>
<li>Create a form in our markup and connect inputs to reactive form</li>
</ul>
<h2>Problem</h2>
<p>Currently, we are showing a list of all restaurants:</p>
<p><img src="../static/img/angular/8-state-city-options/before.png"
style="border: solid 1px black; max-width: 320px;"/></p>
<p>We would like our user to be able to filter restaurants based on city and state. To accomplish this,
we will need to implement a reactive form with two controls, <code>state</code> and <code>city</code>, that are dropdowns displaying a list of cities and states.  It will look like the following:</p>
<p><img src="../static/img/angular/pmo-dropdowns.gif" alt="Place My Order App city and state dropdowns" title="Place My Order App city and state dropdowns" /></p>
<h2>Technical Requirements</h2>
<p>Create a reactive form with two formControls, <code>state</code> and <code>city</code>, and use the <code>formControlName</code> directive to bind the formControls to their select elements in the template.</p>
<h2>Setup</h2>
<p>Here's some code to get you started.  Notice that:</p>
<ul>
<li><code>cities</code> and <code>states</code> are hard coded (for this exercise).</li>
<li>A <code>FormBuilder</code> instance is injected as the <code>fb</code> property.</li>
<li><code>createForm</code> is empty. Use it to initialize the form control.</li>
</ul>
<p>✏️ Update <strong>src/app/restaurant/restaurant.component.ts</strong> to:</p>
<pre><code class="language-ts">import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup } from '@angular/forms';

import { RestaurantService, ResponseData } from './restaurant.service';
import { Restaurant } from './restaurant';

export interface Data {
  value: Array&lt;Restaurant&gt;;
  isPending: boolean;
}

@Component({
  selector: 'pmo-restaurant',
  templateUrl: './restaurant.component.html',
  styleUrls: ['./restaurant.component.less']
})
export class RestaurantComponent implements OnInit {
  form: FormGroup;

  public restaurants: Data = {
    value: [],
    isPending: false
  }

  public states = {
    isPending: false,
    value: [{name: &quot;Illinois&quot;, short: &quot;IL&quot;}, {name: &quot;Wisconsin&quot;, short: &quot;WI&quot;}]
  };

  public cities = {
    isPending: false,
    value: [{name: &quot;Springfield&quot;},{name: &quot;Madison&quot;}]
  }

  constructor(
    private restaurantService: RestaurantService,
    private fb: FormBuilder
    ) {
  }

  ngOnInit() {
    this.createForm();
    this.restaurants.isPending = true;

    this.restaurantService.getRestaurants().subscribe((res: ResponseData) =&gt; {
      this.restaurants.value = res.data;
      this.restaurants.isPending = false;
    });
  }

  createForm() {
    
  }

}

</code></pre>
 <div line-highlight="2,18,25-27,30-33,35-39,42,49,51-53,only"></div>
<p>Make sure to use the <code>formControl</code> directive to tie the selects to
their FormControls in the component.</p>
<p>✏️ Update <strong>src/app/restaurant/restaurant.component.html</strong> to include
some boilerplate for the state and city <code>&lt;select&gt;</code> controls:</p>
<pre><code class="language-html">&lt;div class=&quot;restaurants&quot;&gt;
  &lt;h2 class=&quot;page-header&quot;&gt;Restaurants&lt;/h2&gt;
  &lt;form class=&quot;form&quot; [formGroup]=&quot;form&quot;&gt;
    &lt;div class=&quot;form-group&quot;&gt;
      &lt;label&gt;State&lt;/label&gt;
      &lt;select class=&quot;formControl&quot;&gt;
        &lt;option value=&quot;&quot; *ngIf=&quot;states.isPending&quot;&gt;Loading...&lt;/option&gt;
        &lt;ng-container *ngIf=&quot;!states.isPending&quot;&gt;
          &lt;option value=&quot;&quot;&gt;Choose a state&lt;/option&gt;
          &lt;!-- iterate through all states to create options with
            the short property as the value and the name displayed--&gt;
        &lt;/ng-container&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
      &lt;label&gt;City&lt;/label&gt;
      &lt;select class=&quot;formControl&quot;&gt;
        &lt;option value=&quot;&quot; *ngIf=&quot;cities.isPending&quot;&gt;Loading...&lt;/option&gt;
        &lt;ng-container *ngIf=&quot;!cities.isPending&quot;&gt;
          &lt;option value=&quot;&quot;&gt;Choose a city&lt;/option&gt;
          &lt;!-- iterate through all cities to create options with
            the short property as the value and the name displayed--&gt;
        &lt;/ng-container&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  &lt;/form&gt;
  &lt;div class=&quot;restaurant loading&quot;  *ngIf=&quot;restaurants.isPending&quot;&gt;&lt;/div&gt;
  &lt;ng-container *ngIf=&quot;restaurants.value.length&quot;&gt;
    &lt;div class=&quot;restaurant&quot; *ngFor=&quot;let restaurant of restaurants.value&quot;&gt;

      &lt;img src=&quot;{{restaurant.images.thumbnail | imageUrl}}&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;
      &lt;h3&gt;{{restaurant.name}}&lt;/h3&gt;

      &lt;div class=&quot;address&quot; *ngIf=&quot;restaurant.address&quot;&gt;
        {{restaurant.address.street}}&lt;br /&gt;{{restaurant.address.city}}, {{restaurant.address.state}} {{restaurant.address.zip}}
      &lt;/div&gt;

      &lt;div class=&quot;hours-price&quot;&gt;
        $$$&lt;br /&gt;
        Hours: M-F 10am-11pm
        &lt;span class=&quot;open-now&quot;&gt;Open Now&lt;/span&gt;
      &lt;/div&gt;

      &lt;a class=&quot;btn&quot; [routerLink]=&quot;['/restaurants', restaurant.slug]&quot;&gt;
        Details
      &lt;/a&gt;
      &lt;br /&gt;
    &lt;/div&gt;
  &lt;/ng-container&gt;
&lt;/div&gt;

</code></pre>
 <div line-highlight="3-13,15-27,48,only"></div>
<p>✏️ Update <strong>src/app/app.module.ts</strong> to import reactiveForms in the root app module:</p>
<pre><code class="language-ts">import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { HttpClientModule } from '@angular/common/http';

import { ReactiveFormsModule } from '@angular/forms';

import { AppRoutingModule } from './app-routing.module';
import { AppComponent } from './app.component';
import { HomeComponent } from './home/home.component';
import { RestaurantComponent } from './restaurant/restaurant.component';
import { ImageUrlPipe } from './image-url.pipe';

@NgModule({
  declarations: [
    AppComponent,
    HomeComponent,
    RestaurantComponent,
    ImageUrlPipe
  ],
  imports: [
    BrowserModule,
    AppRoutingModule,
    HttpClientModule,
    ReactiveFormsModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }

</code></pre>
 <div line-highlight="5,23-24,"></div>
<h2>How to Verify Your Solution is Correct</h2>
<p>When you visit <a href="http://localhost:4200/restaurants" target="\_blank">localhost:4200/restaurants</a>, there will now be state and city dropdown options populated with fake data.</p>
<p><img src="../static/img/angular/pmo-dropdowns.gif" alt="Place My Order App city and state dropdowns" title="Place My Order App city and state dropdowns" /></p>
<p>✏️ Update the spec file  <strong>src/app/restaurant/restaurant.component.spec.ts</strong> to be:</p>
<pre><code class="language-ts">import { async, ComponentFixture, TestBed, tick, fakeAsync } from '@angular/core/testing';
import { RouterTestingModule } from '@angular/router/testing';
import { of } from 'rxjs'; 

import { RestaurantComponent } from './restaurant.component';
import { RestaurantService } from './restaurant.service';
import { ImageUrlPipe } from '../image-url.pipe';
import { ReactiveFormsModule } from '@angular/forms';

class MockRestaurantService {
  getRestaurants() {
    return of({
      data: [{
        &quot;name&quot;: &quot;Poutine Palace&quot;,
        &quot;slug&quot;: &quot;poutine-palace&quot;,
        &quot;images&quot;: {
          &quot;thumbnail&quot;: &quot;node_modules/place-my-order-assets/images/4-thumbnail.jpg&quot;,
          &quot;owner&quot;: &quot;node_modules/place-my-order-assets/images/3-owner.jpg&quot;,
          &quot;banner&quot;: &quot;node_modules/place-my-order-assets/images/2-banner.jpg&quot;
        },
        &quot;menu&quot;: {
          &quot;lunch&quot;: [
            {
              &quot;name&quot;: &quot;Crab Pancakes with Sorrel Syrup&quot;,
              &quot;price&quot;: 35.99
            },
            {
              &quot;name&quot;: &quot;Steamed Mussels&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Spinach Fennel Watercress Ravioli&quot;,
              &quot;price&quot;: 35.99
            }
          ],
          &quot;dinner&quot;: [
            {
              &quot;name&quot;: &quot;Gunthorp Chicken&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Herring in Lavender Dill Reduction&quot;,
              &quot;price&quot;: 45.99
            },
            {
              &quot;name&quot;: &quot;Chicken with Tomato Carrot Chutney Sauce&quot;,
              &quot;price&quot;: 45.99
            }
          ]
        },
        &quot;address&quot;: {
          &quot;street&quot;: &quot;230 W Kinzie Street&quot;,
          &quot;city&quot;: &quot;Green Bay&quot;,
          &quot;state&quot;: &quot;WI&quot;,
          &quot;zip&quot;: &quot;53205&quot;
        },
        &quot;_id&quot;: &quot;3ZOZyTY1LH26LnVw&quot;
      },
      {
        &quot;name&quot;: &quot;Cheese Curd City&quot;,
        &quot;slug&quot;: &quot;cheese-curd-city&quot;,
        &quot;images&quot;: {
          &quot;thumbnail&quot;: &quot;node_modules/place-my-order-assets/images/2-thumbnail.jpg&quot;,
          &quot;owner&quot;: &quot;node_modules/place-my-order-assets/images/3-owner.jpg&quot;,
          &quot;banner&quot;: &quot;node_modules/place-my-order-assets/images/2-banner.jpg&quot;
        },
        &quot;menu&quot;: {
          &quot;lunch&quot;: [
            {
              &quot;name&quot;: &quot;Ricotta Gnocchi&quot;,
              &quot;price&quot;: 15.99
            },
            {
              &quot;name&quot;: &quot;Gunthorp Chicken&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Garlic Fries&quot;,
              &quot;price&quot;: 15.99
            }
          ],
          &quot;dinner&quot;: [
            {
              &quot;name&quot;: &quot;Herring in Lavender Dill Reduction&quot;,
              &quot;price&quot;: 45.99
            },
            {
              &quot;name&quot;: &quot;Truffle Noodles&quot;,
              &quot;price&quot;: 14.99
            },
            {
              &quot;name&quot;: &quot;Charred Octopus&quot;,
              &quot;price&quot;: 25.99
            }
          ]
        },
        &quot;address&quot;: {
          &quot;street&quot;: &quot;2451 W Washburne Ave&quot;,
          &quot;city&quot;: &quot;Green Bay&quot;,
          &quot;state&quot;: &quot;WI&quot;,
          &quot;zip&quot;: &quot;53295&quot;
        },
        &quot;_id&quot;: &quot;Ar0qBJHxM3ecOhcr&quot;
      }]}
            )
  }
}
describe('RestaurantComponent', () =&gt; {
  let component: RestaurantComponent;
  let fixture: ComponentFixture&lt;RestaurantComponent&gt;;

  beforeEach(async(() =&gt; {
    TestBed.configureTestingModule({
      imports: [
        RouterTestingModule,
        ReactiveFormsModule
      ],
      providers: [{
        provide: RestaurantService,
        useClass: MockRestaurantService
      }],
      declarations: [ RestaurantComponent, ImageUrlPipe ]
    })
    .compileComponents();
  }));

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(RestaurantComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should render title in a h2 tag', () =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    expect(compiled.querySelector('h2').textContent).toContain('Restaurants');
  });

  it('should not show any restaurants markup if no restaurants', () =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    const compiled = fixture.debugElement.nativeElement;
    expect(compiled.querySelector('.restaurant')).toBe(null);
  });

  it('should have two .restaurant divs',  &lt;any&gt;fakeAsync((): void =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    tick(501);
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    let restaurantDivs = compiled.getElementsByClassName('restaurant');
    let hoursDivs = compiled.getElementsByClassName('hours-price');
    expect(restaurantDivs.length).toEqual(2);
    expect(hoursDivs.length).toEqual(2);
  }));

  it('should display restaurant information',  &lt;any&gt;fakeAsync((): void =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    tick(501);
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    expect(compiled.querySelector('.restaurant h3').textContent).toContain('Poutine Palace');
  }));

  it('should set restaurants value to restaurants response data and set isPending to false', &lt;any&gt;fakeAsync((): void =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    tick();
    fixture.detectChanges();
    let expectedRestaurants = {
      value: [{
        &quot;name&quot;: &quot;Poutine Palace&quot;,
        &quot;slug&quot;: &quot;poutine-palace&quot;,
        &quot;images&quot;: {
          &quot;thumbnail&quot;: &quot;node_modules/place-my-order-assets/images/4-thumbnail.jpg&quot;,
          &quot;owner&quot;: &quot;node_modules/place-my-order-assets/images/3-owner.jpg&quot;,
          &quot;banner&quot;: &quot;node_modules/place-my-order-assets/images/2-banner.jpg&quot;
        },
        &quot;menu&quot;: {
          &quot;lunch&quot;: [
            {
              &quot;name&quot;: &quot;Crab Pancakes with Sorrel Syrup&quot;,
              &quot;price&quot;: 35.99
            },
            {
              &quot;name&quot;: &quot;Steamed Mussels&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Spinach Fennel Watercress Ravioli&quot;,
              &quot;price&quot;: 35.99
            }
          ],
          &quot;dinner&quot;: [
            {
              &quot;name&quot;: &quot;Gunthorp Chicken&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Herring in Lavender Dill Reduction&quot;,
              &quot;price&quot;: 45.99
            },
            {
              &quot;name&quot;: &quot;Chicken with Tomato Carrot Chutney Sauce&quot;,
              &quot;price&quot;: 45.99
            }
          ]
        },
        &quot;address&quot;: {
          &quot;street&quot;: &quot;230 W Kinzie Street&quot;,
          &quot;city&quot;: &quot;Green Bay&quot;,
          &quot;state&quot;: &quot;WI&quot;,
          &quot;zip&quot;: &quot;53205&quot;
        },
        &quot;_id&quot;: &quot;3ZOZyTY1LH26LnVw&quot;
      },
      {
        &quot;name&quot;: &quot;Cheese Curd City&quot;,
        &quot;slug&quot;: &quot;cheese-curd-city&quot;,
        &quot;images&quot;: {
          &quot;thumbnail&quot;: &quot;node_modules/place-my-order-assets/images/2-thumbnail.jpg&quot;,
          &quot;owner&quot;: &quot;node_modules/place-my-order-assets/images/3-owner.jpg&quot;,
          &quot;banner&quot;: &quot;node_modules/place-my-order-assets/images/2-banner.jpg&quot;
        },
        &quot;menu&quot;: {
          &quot;lunch&quot;: [
            {
              &quot;name&quot;: &quot;Ricotta Gnocchi&quot;,
              &quot;price&quot;: 15.99
            },
            {
              &quot;name&quot;: &quot;Gunthorp Chicken&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Garlic Fries&quot;,
              &quot;price&quot;: 15.99
            }
          ],
          &quot;dinner&quot;: [
            {
              &quot;name&quot;: &quot;Herring in Lavender Dill Reduction&quot;,
              &quot;price&quot;: 45.99
            },
            {
              &quot;name&quot;: &quot;Truffle Noodles&quot;,
              &quot;price&quot;: 14.99
            },
            {
              &quot;name&quot;: &quot;Charred Octopus&quot;,
              &quot;price&quot;: 25.99
            }
          ]
        },
        &quot;address&quot;: {
          &quot;street&quot;: &quot;2451 W Washburne Ave&quot;,
          &quot;city&quot;: &quot;Green Bay&quot;,
          &quot;state&quot;: &quot;WI&quot;,
          &quot;zip&quot;: &quot;53295&quot;
        },
        &quot;_id&quot;: &quot;Ar0qBJHxM3ecOhcr&quot;
      }],
      isPending: false
    }
    expect(fixture.componentInstance.restaurants).toEqual(expectedRestaurants);
  }));

  it('should show a loading div while isPending is true', () =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    fixture.componentInstance.restaurants.isPending = true;
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    let loadingDiv = compiled.querySelector('.loading');
    expect(loadingDiv).toBeTruthy();
  });

  it('should not show a loading div if isPending is false', () =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.componentInstance.restaurants.isPending = false;
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    let loadingDiv = compiled.querySelector('.loading');
    expect(loadingDiv).toBe(null);
  });


  it('should have a form property with city and state keys', () =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    expect(fixture.componentInstance.form.controls.state).toBeTruthy();
    expect(fixture.componentInstance.form.controls.city).toBeTruthy();
  });

  it('should show a state dropdown', () =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    let stateSelect = compiled.querySelector('select[formcontrolname=&quot;state&quot;]');
    expect(stateSelect).toBeTruthy();
  });

  it('should show a city dropdown', () =&gt; {
    const fixture = TestBed.createComponent(RestaurantComponent);
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    let citySelect = compiled.querySelector('select[formcontrolname=&quot;city&quot;]');
    expect(citySelect).toBeTruthy();
  });
});
</code></pre>
<div line-highlight='8,116,294-299,301-307,309-315, only'></div>
<p>✏️ Update the spec file  <strong>src/app/app.component.spec.ts</strong> to be:</p>
<pre><code class="language-ts">import { TestBed, async, fakeAsync, tick, flush } from '@angular/core/testing';
import { Router } from '@angular/router';
import { Location } from '@angular/common';
import { By } from '@angular/platform-browser';
import { of } from 'rxjs'; 

import { AppComponent } from './app.component';
import { AppRoutingModule } from './app-routing.module';
import { HomeComponent } from './home/home.component';
import { RestaurantComponent } from './restaurant/restaurant.component';
import { NO_ERRORS_SCHEMA } from '@angular/core';
import { ImageUrlPipe } from './image-url.pipe';
import { HttpClientModule } from '@angular/common/http';
import { RestaurantService } from './restaurant/restaurant.service';
import { ReactiveFormsModule } from '@angular/forms';

class MockRestaurantService {
  getRestaurants() {
    return of({
      data: [{
        &quot;name&quot;: &quot;Poutine Palace&quot;,
        &quot;slug&quot;: &quot;poutine-palace&quot;,
        &quot;images&quot;: {
          &quot;thumbnail&quot;: &quot;node_modules/place-my-order-assets/images/4-thumbnail.jpg&quot;,
          &quot;owner&quot;: &quot;node_modules/place-my-order-assets/images/3-owner.jpg&quot;,
          &quot;banner&quot;: &quot;node_modules/place-my-order-assets/images/2-banner.jpg&quot;
        },
        &quot;menu&quot;: {
          &quot;lunch&quot;: [
            {
              &quot;name&quot;: &quot;Crab Pancakes with Sorrel Syrup&quot;,
              &quot;price&quot;: 35.99
            },
            {
              &quot;name&quot;: &quot;Steamed Mussels&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Spinach Fennel Watercress Ravioli&quot;,
              &quot;price&quot;: 35.99
            }
          ],
          &quot;dinner&quot;: [
            {
              &quot;name&quot;: &quot;Gunthorp Chicken&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Herring in Lavender Dill Reduction&quot;,
              &quot;price&quot;: 45.99
            },
            {
              &quot;name&quot;: &quot;Chicken with Tomato Carrot Chutney Sauce&quot;,
              &quot;price&quot;: 45.99
            }
          ]
        },
        &quot;address&quot;: {
          &quot;street&quot;: &quot;230 W Kinzie Street&quot;,
          &quot;city&quot;: &quot;Green Bay&quot;,
          &quot;state&quot;: &quot;WI&quot;,
          &quot;zip&quot;: &quot;53205&quot;
        },
        &quot;_id&quot;: &quot;3ZOZyTY1LH26LnVw&quot;
      },
      {
        &quot;name&quot;: &quot;Cheese Curd City&quot;,
        &quot;slug&quot;: &quot;cheese-curd-city&quot;,
        &quot;images&quot;: {
          &quot;thumbnail&quot;: &quot;node_modules/place-my-order-assets/images/2-thumbnail.jpg&quot;,
          &quot;owner&quot;: &quot;node_modules/place-my-order-assets/images/3-owner.jpg&quot;,
          &quot;banner&quot;: &quot;node_modules/place-my-order-assets/images/2-banner.jpg&quot;
        },
        &quot;menu&quot;: {
          &quot;lunch&quot;: [
            {
              &quot;name&quot;: &quot;Ricotta Gnocchi&quot;,
              &quot;price&quot;: 15.99
            },
            {
              &quot;name&quot;: &quot;Gunthorp Chicken&quot;,
              &quot;price&quot;: 21.99
            },
            {
              &quot;name&quot;: &quot;Garlic Fries&quot;,
              &quot;price&quot;: 15.99
            }
          ],
          &quot;dinner&quot;: [
            {
              &quot;name&quot;: &quot;Herring in Lavender Dill Reduction&quot;,
              &quot;price&quot;: 45.99
            },
            {
              &quot;name&quot;: &quot;Truffle Noodles&quot;,
              &quot;price&quot;: 14.99
            },
            {
              &quot;name&quot;: &quot;Charred Octopus&quot;,
              &quot;price&quot;: 25.99
            }
          ]
        },
        &quot;address&quot;: {
          &quot;street&quot;: &quot;2451 W Washburne Ave&quot;,
          &quot;city&quot;: &quot;Green Bay&quot;,
          &quot;state&quot;: &quot;WI&quot;,
          &quot;zip&quot;: &quot;53295&quot;
        },
        &quot;_id&quot;: &quot;Ar0qBJHxM3ecOhcr&quot;
      }]}
            )
  }

  getStates() {
    return of({
      data: [
        {&quot;short&quot;:&quot;MO&quot;,&quot;name&quot;:&quot;Missouri&quot;},
        {&quot;short&quot;:&quot;CA  &quot;,&quot;name&quot;:&quot;California&quot;},
        {&quot;short&quot;:&quot;MI&quot;,&quot;name&quot;:&quot;Michigan&quot;}]
    });
  }

  getCities(state:string) {
    return of({
      data: [{&quot;name&quot;:&quot;Sacramento&quot;,&quot;state&quot;:&quot;CA&quot;},{&quot;name&quot;:&quot;Oakland&quot;,&quot;state&quot;:&quot;CA&quot;}]
    });
  }

  getRestaurant(slug:string) {
    return of({
      &quot;name&quot;: &quot;Poutine Palace&quot;,
      &quot;slug&quot;: &quot;poutine-palace&quot;,
      &quot;images&quot;: {
        &quot;thumbnail&quot;: &quot;node_modules/place-my-order-assets/images/4-thumbnail.jpg&quot;,
        &quot;owner&quot;: &quot;node_modules/place-my-order-assets/images/3-owner.jpg&quot;,
        &quot;banner&quot;: &quot;node_modules/place-my-order-assets/images/2-banner.jpg&quot;
      },
      &quot;menu&quot;: {
        &quot;lunch&quot;: [
          {
            &quot;name&quot;: &quot;Crab Pancakes with Sorrel Syrup&quot;,
            &quot;price&quot;: 35.99
          },
          {
            &quot;name&quot;: &quot;Steamed Mussels&quot;,
            &quot;price&quot;: 21.99
          },
          {
            &quot;name&quot;: &quot;Spinach Fennel Watercress Ravioli&quot;,
            &quot;price&quot;: 35.99
          }
        ],
        &quot;dinner&quot;: [
          {
            &quot;name&quot;: &quot;Gunthorp Chicken&quot;,
            &quot;price&quot;: 21.99
          },
          {
            &quot;name&quot;: &quot;Herring in Lavender Dill Reduction&quot;,
            &quot;price&quot;: 45.99
          },
          {
            &quot;name&quot;: &quot;Chicken with Tomato Carrot Chutney Sauce&quot;,
            &quot;price&quot;: 45.99
          }
        ]
      },
      &quot;address&quot;: {
        &quot;street&quot;: &quot;230 W Kinzie Street&quot;,
        &quot;city&quot;: &quot;Green Bay&quot;,
        &quot;state&quot;: &quot;WI&quot;,
        &quot;zip&quot;: &quot;53205&quot;
      },
      &quot;_id&quot;: &quot;3ZOZyTY1LH26LnVw&quot;
    })
  }
}

describe('AppComponent', () =&gt; {
  let router: Router;
  let location: Location;
  let fixture;

  beforeEach(async(() =&gt; {
    TestBed.configureTestingModule({
      imports: [
        AppRoutingModule, HttpClientModule, ReactiveFormsModule
      ],
      declarations: [
        AppComponent, HomeComponent, RestaurantComponent, ImageUrlPipe
      ],
      schemas: [
        NO_ERRORS_SCHEMA
      ]
    }).overrideComponent(RestaurantComponent, {
      set: {
        providers: [
          { provide: RestaurantService, useClass: MockRestaurantService }
        ],
        template: '&lt;p&gt; I am a fake restaurant component&lt;/p&gt;'
      }
    })
    .compileComponents();

    router = TestBed.get(Router);
    location = TestBed.get(Location);

    fixture = TestBed.createComponent(AppComponent);
  }));

  it('should create the app', () =&gt; {
    const app = fixture.debugElement.componentInstance;
    expect(app).toBeTruthy();
  });

  it(`should have as title 'place-my-order'`, () =&gt; {
    const app = fixture.debugElement.componentInstance;
    expect(app.title).toEqual('place-my-order');
  });

  it('should render title in a h1 tag', () =&gt; {
    const fixture = TestBed.createComponent(AppComponent);
    fixture.detectChanges();
    const compiled = fixture.debugElement.nativeElement;
    expect(compiled.querySelector('h1').textContent).toContain('place-my-order.com');
  });

  it('should render the HomeComponent with router navigates to &quot;/&quot; path', () =&gt; {
    const compiled = fixture.debugElement.nativeElement;
    router.navigate(['']).then(() =&gt; {
      expect(location.path()).toBe('');
      expect(compiled.querySelector('pmo-home')).not.toBe(null);
    });
  });

  it('should render the RestaurantsComponent with router navigates to &quot;/restaurants&quot; path', () =&gt; {
    const compiled = fixture.debugElement.nativeElement;
    router.navigate(['restaurants']).then(() =&gt; {
      expect(location.path()).toBe('/restaurants');
      expect(compiled.querySelector('pmo-restaurant')).not.toBe(null);
    });
  });

  it('should have the home navigation link href set to &quot;&quot;', () =&gt; {
    fixture.detectChanges();
    let homeLink = fixture.debugElement.query(By.css('li a'));
    let href = homeLink.nativeElement.getAttribute('href');
    expect(href).toEqual('/');
  });

  it('should have the restaurants navigation link href set to &quot;&quot;', () =&gt; {
    fixture.detectChanges();
    let restaurantsLink = fixture.debugElement.query(By.css('li:nth-child(2) a'));
    let href = restaurantsLink.nativeElement.getAttribute('href');
    expect(href).toEqual('/restaurants');
  });

  it('should make the home navigation link class active when the router navigates to &quot;/&quot; path', fakeAsync(() =&gt; {
    const compiled = fixture.debugElement.nativeElement;
    router.navigate(['']).then(() =&gt; {
      fixture.detectChanges();
      tick();
      fixture.detectChanges();
      let homeLinkLi = fixture.debugElement.query(By.css('li'));
      expect(homeLinkLi.nativeElement.classList).toContain('active');
      expect(compiled.querySelectorAll('.active').length).toBe(1);
      fixture.destroy();
      flush();
    });
  }));

  it('should make the restaurants navigation link class active when the router navigates to &quot;/restaurants&quot; path', fakeAsync(() =&gt; {
    const compiled = fixture.debugElement.nativeElement;
    router.navigate(['restaurants']).then(() =&gt; {
      expect(location.path()).toBe('/restaurants');
      fixture.detectChanges();
      tick();
      fixture.detectChanges();
      let restaurantsLinkLi = fixture.debugElement.query(By.css('li:nth-child(2)'));
      expect(restaurantsLinkLi.nativeElement.classList).toContain('active');
      expect(compiled.querySelectorAll('.active').length).toBe(1);
      fixture.destroy();
      flush();
    });
  }));

});
</code></pre>
 <div line-highlight="15,188,200-201,"></div>
<blockquote>
<p>If you've implemented the solution correctly, when you run <code>npm run test</code> all tests will pass!</p>
</blockquote>
<h2>What You Need to Know</h2>
<p>To solve this, you will need to know:</p>
<ul>
<li>How to create a FormControl</li>
<li>How to use <code>formControl</code> directive in the dom</li>
<li>How to create a FormGroup</li>
<li>How to use FormBuilder</li>
<li>How to use ngFor (you learned this in the Creating Components section! ✔️)</li>
</ul>
<h2>Reactive Forms</h2>
<p>We're eventually going to use select boxes to handle our user's input. Angular's <a href="https://angular.io/guide/reactive-forms" target="\_blank">Reactive Forms</a> API provides a clean way to get data from user input and do work based on it.</p>
<blockquote>
<p>From the docs: Reactive forms use an explicit and immutable approach to managing the state of a form at a given point in time. Each change to the form state returns a new state, which maintains the integrity of the model between changes. Reactive forms are built around observable streams, where form inputs and values are provided as streams of input values, which can be accessed synchronously.</p>
</blockquote>
<h2>ReactiveFormsModule</h2>
<p>To use reactive forms we must import our ReactiveFormsModule into the root app.</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.2.1/rxjs.umd.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/core-js/2.5.7/core.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/core@7.2.0/bundles/core.umd.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/zone.js/0.8.26/zone.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/common@7.2.0/bundles/common.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/compiler@7.2.0/bundles/compiler.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/router@7.2.0/bundles/router.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/forms@7.2.0/bundles/forms.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser@7.2.0/bundles/platform-browser.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser-dynamic@7.2.0/bundles/platform-browser-dynamic.umd.js&quot;&gt;&lt;/script&gt;
&lt;base href=&quot;/&quot;&gt;
&lt;my-app&gt;&lt;/my-app&gt;
&lt;script type=&quot;typescript&quot;&gt;
const { Component, NgModule, VERSION, OnInit, Injectable } = ng.core;
const { BrowserModule } = ng.platformBrowser;
const { CommonModule } = ng.common;
const { Routes, RouterModule } = ng.router;
const { ReactiveFormsModule } = ng.forms;

@Component({
  selector: 'my-app',
  template: `
    &lt;ul class=&quot;nav&quot;&gt;
      &lt;li routerLinkActive=&quot;active&quot;&gt;
        &lt;a routerLink=&quot;/about&quot; &gt;About&lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
    &lt;router-outlet&gt;&lt;/router-outlet&gt;
  `
})
class AppComponent {
  constructor() {}
}

@Component({
  selector: 'about-component',
  template: `
    &lt;p&gt;An about component!&lt;/p&gt;
  `
})
class AboutComponent {
  constructor() {
  }
}

@Component({
  selector: 'home-component',
  template: `
    &lt;p&gt;A home component!&lt;/p&gt;
  `
})
class HomeComponent implements OnInit{

  constructor() {
  
  }

  ngOnInit() {
  }
}

const routes: Routes = [
  { path: 'about', component: AboutComponent },
  { path: '**', component: HomeComponent }
]
@NgModule({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
})
class AppRoutingModule { }

                 
@NgModule({
  declarations: [AppComponent, AboutComponent, HomeComponent],
  imports: [
    BrowserModule,
    CommonModule,
    AppRoutingModule, 
    ReactiveFormsModule
  ],
  bootstrap: [AppComponent],
  providers: []
})
class AppModule {}

const { platformBrowserDynamic } = ng.platformBrowserDynamic;

platformBrowserDynamic()
  .bootstrapModule(AppModule)
  .catch(err =&gt; console.error(err));
&lt;/script&gt;


</code></pre>
<div class='codepen'></div>
<div line-highlight='79,only'></div>
<h2>FormControl</h2>
<p>The basic element of a reactive form is the <a href="https://angular.io/api/forms/FormControl" target="\_blank">FormControl</a>. This class manages the form input model and connection to it's input element in the dom and inherits from the <a href="https://angular.io/api/forms/AbstractControl" target="\_blank">AbstractControl</a>
class. It's worth getting familiar with the methods available in this class (like setValidators and patchValue), as they're used quite often in reactive form development. The formControl is bound to it's element in the dom using the <code>[formControl]</code> directive.</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.2.1/rxjs.umd.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/core-js/2.5.7/core.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/core@7.2.0/bundles/core.umd.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/zone.js/0.8.26/zone.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/common@7.2.0/bundles/common.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/compiler@7.2.0/bundles/compiler.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/router@7.2.0/bundles/router.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser@7.2.0/bundles/platform-browser.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser-dynamic@7.2.0/bundles/platform-browser-dynamic.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/forms@7.2.0/bundles/forms.umd.js&quot;&gt;&lt;/script&gt;
&lt;base href=&quot;/&quot;&gt;
&lt;my-app&gt;&lt;/my-app&gt;
&lt;script type=&quot;typescript&quot;&gt;
const { Component, NgModule, VERSION, OnInit, Injectable } = ng.core;
const { BrowserModule } = ng.platformBrowser;
const { CommonModule } = ng.common;
const { ReactiveFormsModule, FormControl } = ng.forms;

@Component({
  selector: 'my-app',
  template: `
    &lt;p&gt;A home component!&lt;/p&gt;
    &lt;p&gt;
      Value: {{ name.value }}
    &lt;/p&gt;
    &lt;label&gt;
      Name:
      &lt;input type=&quot;text&quot; [formControl]=&quot;name&quot;&gt;
    &lt;/label&gt;
  `
})
class AppComponent {
  public  name = new FormControl('');

  constructor() {}
}
           
@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    CommonModule,
    ReactiveFormsModule
  ],
  bootstrap: [AppComponent],
  providers: []
})
class AppModule {}

const { platformBrowserDynamic } = ng.platformBrowserDynamic;

platformBrowserDynamic()
  .bootstrapModule(AppModule)
  .catch(err =&gt; console.error(err));
&lt;/script&gt;


</code></pre>
<div class='codepen'></div>
<div line-highlight='17,23-29,33,only'></div>
<h2>FormGroup</h2>
<p>A FormGroup is a way of grouping FormControls and tracking the state of the entire group. For instance, if you want to get the values of all of your FormControls to submit as an object of those values, you'd use <code>formGroupname.value</code>. Notice the way we connect our input in the markup is slightly different - we use can use the <code>formControlName</code> directive to bind to the name value of a FormControl in our FormGroup. Groups can be nested within other groups or arrays.</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.2.1/rxjs.umd.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/core-js/2.5.7/core.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/core@7.2.0/bundles/core.umd.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/zone.js/0.8.26/zone.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/common@7.2.0/bundles/common.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/compiler@7.2.0/bundles/compiler.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/router@7.2.0/bundles/router.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser@7.2.0/bundles/platform-browser.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser-dynamic@7.2.0/bundles/platform-browser-dynamic.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/forms@7.2.0/bundles/forms.umd.js&quot;&gt;&lt;/script&gt;
&lt;base href=&quot;/&quot;&gt;
&lt;my-app&gt;&lt;/my-app&gt;
&lt;script type=&quot;typescript&quot;&gt;
const { Component, NgModule, VERSION, OnInit } = ng.core;
const { BrowserModule } = ng.platformBrowser;
const { CommonModule } = ng.common;
const { ReactiveFormsModule, FormControl, FormGroup } = ng.forms;

@Component({
  selector: 'my-app',
  template: `
  &lt;p&gt;A home component!&lt;/p&gt;
  &lt;form [formGroup]=&quot;userForm&quot; (ngSubmit)=&quot;onSubmit()&quot;&gt;
    &lt;label&gt;
        First name:
        &lt;input type=&quot;text&quot; formControlName=&quot;firstName&quot;&gt;
      &lt;/label&gt;
      &lt;label&gt;
        Last name:
        &lt;input type=&quot;text&quot; formControlName=&quot;lastName&quot;&gt;
      &lt;/label&gt;
      &lt;label&gt;
        Email:
        &lt;input type=&quot;text&quot; formControlName=&quot;email&quot;&gt;
      &lt;/label&gt;
      &lt;button type=&quot;submit&quot;&gt;see form value&lt;/button&gt;
  &lt;/form&gt;

  {{ formValue | json }}
  `
})
class AppComponent {
  public formValue;

  public userForm = new FormGroup({
    firstName: new FormControl(''),
    lastName: new FormControl(''),
    email: new FormControl('')
  });

  constructor() {}

  onSubmit() {
    this.formValue = this.userForm.value;
  }
}
                 
@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    CommonModule,
    ReactiveFormsModule
  ],
  bootstrap: [AppComponent],
  providers: []
})
class AppModule {}

const { platformBrowserDynamic } = ng.platformBrowserDynamic;

platformBrowserDynamic()
  .bootstrapModule(AppModule)
  .catch(err =&gt; console.error(err));
&lt;/script&gt;


</code></pre>
<div class='codepen'></div>
<div line-highlight='17,23-37,39,43,45-49,53-55,only'></div>
<h2>FormArray</h2>
<p>FormArray aggregates FormControls into an array. It's different than FormGroup in that the controls inside are serialized as an array. FormArrays are very useful when dealing with repeated FormControls or dynamic forms that allow users to create additional inputs. Arrays can be nested in groups or other arrays.</p>
<p>This example shows the use of FormArray and using an <code>insert</code> method to dynamically add more FormGroups to the <code>users</code> FormArray.</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.2.1/rxjs.umd.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/core-js/2.5.7/core.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/core@7.2.0/bundles/core.umd.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/zone.js/0.8.26/zone.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/common@7.2.0/bundles/common.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/compiler@7.2.0/bundles/compiler.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/router@7.2.0/bundles/router.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser@7.2.0/bundles/platform-browser.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser-dynamic@7.2.0/bundles/platform-browser-dynamic.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/forms@7.2.0/bundles/forms.umd.js&quot;&gt;&lt;/script&gt;
&lt;base href=&quot;/&quot;&gt;
&lt;my-app&gt;&lt;/my-app&gt;
&lt;script type=&quot;typescript&quot;&gt;
const { Component, NgModule, VERSION, OnInit, Injectable } = ng.core;
const { BrowserModule } = ng.platformBrowser;
const { CommonModule } = ng.common;
const { ReactiveFormsModule, FormControl, FormGroup, FormArray } = ng.forms;

@Component({
  selector: 'my-app',
  template: `
  &lt;p&gt;A home component!&lt;/p&gt;
  &lt;form [formGroup]=&quot;usersForm&quot; (ngSubmit)=&quot;onSubmit()&quot;&gt;
    &lt;p&gt;This form can handle creating many users at once!&lt;/p&gt;
    &lt;ng-container 
    *ngFor=&quot;let userFormGroup of usersForm.controls.users.controls; 
    let i = index&quot;&gt;
      &lt;div [formGroup]=&quot;userFormGroup&quot;&gt;
        &lt;label&gt;
          First name:
          &lt;input type=&quot;text&quot; formControlName=&quot;firstName&quot;&gt;
        &lt;/label&gt;
        &lt;label&gt;
          Last name:
          &lt;input type=&quot;text&quot; formControlName=&quot;lastName&quot;&gt;
        &lt;/label&gt;
        &lt;label&gt;
          Email:
          &lt;input type=&quot;text&quot; formControlName=&quot;email&quot;&gt;
        &lt;/label&gt;
      &lt;/div&gt;
    &lt;/ng-container&gt;
    &lt;button type=&quot;submit&quot;&gt;see form value&lt;/button&gt;
  &lt;/form&gt;
  &lt;button (click)=&quot;addGroup()&quot;&gt;add group&lt;/button&gt;

  {{ formValue | json }}
  `
})
class AppComponent {
  public formValue;

  public usersForm = new FormGroup({
    users: new FormArray([
      new FormGroup({
        firstName: new FormControl(''),
        lastName: new FormControl(''),
        email: new FormControl('')
      }),
      new FormGroup({
        firstName: new FormControl(''),
        lastName: new FormControl(''),
        email: new FormControl('')
      })
    ])
  });

  constructor() {}

  addGroup() {
    let usersArray = this.usersForm.get('users') as FormArray;
    let usersLen = usersArray.length;

    let newUserGroup =  new FormGroup({
      firstName: new FormControl(''),
      lastName: new FormControl(''),
      email: new FormControl('')
    });

    usersArray.insert(usersLen, newUserGroup)
  }

  onSubmit() {
    this.formValue = this.usersForm.value;
  }
}
            
@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    CommonModule,
    ReactiveFormsModule
  ],
  bootstrap: [AppComponent],
  providers: []
})
class AppModule {}

const { platformBrowserDynamic } = ng.platformBrowserDynamic;

platformBrowserDynamic()
  .bootstrapModule(AppModule)
  .catch(err =&gt; console.error(err));
&lt;/script&gt;


</code></pre>
<div class='codepen'></div>
<div line-highlight='17,23-45,47,53-66,70-81,only'></div>
<h2>FormBuilder</h2>
<p><a href="https://angular.io/api/forms/FormBuilder" target="\_blank">FormBuilder</a> is a shorthand way to quickly write forms by reducing boilerplate code of manually having to write <code>new FormControl</code>, <code>new FormGroup</code>, <code>new FormArray</code> repeatedly.</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.2.1/rxjs.umd.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/core-js/2.5.7/core.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/core@7.2.0/bundles/core.umd.js&quot;/&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/zone.js/0.8.26/zone.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/common@7.2.0/bundles/common.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/compiler@7.2.0/bundles/compiler.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/router@7.2.0/bundles/router.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser@7.2.0/bundles/platform-browser.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/platform-browser-dynamic@7.2.0/bundles/platform-browser-dynamic.umd.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://unpkg.com/@angular/forms@7.2.0/bundles/forms.umd.js&quot;&gt;&lt;/script&gt;
&lt;base href=&quot;/&quot;&gt;
&lt;my-app&gt;&lt;/my-app&gt;
&lt;script type=&quot;typescript&quot;&gt;
const { Component, NgModule, VERSION, OnInit } = ng.core;
const { BrowserModule } = ng.platformBrowser;
const { CommonModule } = ng.common;
const { ReactiveFormsModule, FormGroup, FormBuilder } = ng.forms;

@Component({
  selector: 'my-app',
  template: `
    &lt;p&gt;A home component!&lt;/p&gt;
    &lt;form [formGroup]=&quot;myQuickForm&quot;&gt;
      &lt;label&gt;
          First name:
          &lt;input type=&quot;text&quot; formControlName=&quot;firstName&quot;&gt;
        &lt;/label&gt;
        &lt;label&gt;
          Last name:
          &lt;input type=&quot;text&quot; formControlName=&quot;lastName&quot;&gt;
        &lt;/label&gt;
        &lt;label&gt;
          Email:
          &lt;input type=&quot;text&quot; formControlName=&quot;email&quot;&gt;
        &lt;/label&gt;
    &lt;/form&gt;
  `
})
class AppComponent implements OnInit {
  myQuickForm: FormGroup;

  constructor(private fb:FormBuilder) {}

  ngOnInit() {
    this.myQuickForm = this.fb.group({
      firstName: {value: '', disabled: false},
      lastName: {value: '', disabled: false},
      email: {value: '', disabled: false}
    });
  }
}
//THIS IS A HACK JUST FOR CODEPEN TO WORK
AppComponent.parameters = [FormBuilder];

@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    CommonModule,
    ReactiveFormsModule
  ],
  bootstrap: [AppComponent],
  providers: []
})
class AppModule {}

const { platformBrowserDynamic } = ng.platformBrowserDynamic;

platformBrowserDynamic()
  .bootstrapModule(AppModule)
  .catch(err =&gt; console.error(err));
&lt;/script&gt;


</code></pre>
<div class='codepen'></div>
<div line-highlight='17,40,42,45-49,only'></div>
<h2>The Solution</h2>
<p>✏️ Update <strong>src/app/restaurant/restaurant.component.ts</strong> to:</p>
<pre><code class="language-ts">import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup } from '@angular/forms';

import { RestaurantService, ResponseData } from './restaurant.service';
import { Restaurant } from './restaurant';

export interface Data {
  value: Array&lt;Restaurant&gt;;
  isPending: boolean;
}

@Component({
  selector: 'pmo-restaurant',
  templateUrl: './restaurant.component.html',
  styleUrls: ['./restaurant.component.less']
})
export class RestaurantComponent implements OnInit {
  form: FormGroup;

  public restaurants: Data = {
    value: [],
    isPending: false
  }

  public states = {
    isPending: false,
    value: [{name: &quot;Illinois&quot;, short: &quot;IL&quot;}, {name: &quot;Wisconsin&quot;, short: &quot;WI&quot;}]
  };

  public cities = {
    isPending: false,
    value: [{name: &quot;Springfield&quot;},{name: &quot;Madison&quot;}]
  }

  constructor(
    private restaurantService: RestaurantService,
    private fb: FormBuilder
    ) {
  }

  ngOnInit() {
    this.createForm();
    this.restaurants.isPending = true;

    this.restaurantService.getRestaurants().subscribe((res: ResponseData) =&gt; {
      this.restaurants.value = res.data;
      this.restaurants.isPending = false;
    });
  }

  createForm() {
    this.form = this.fb.group({
      state: {value: '', disabled: false},
      city: {value: '', disabled: false},
    });
  }

}

</code></pre>
<div line-highlight='2,18,25-39,42,50-55'></div>
<p>✏️ Update <strong>src/app/restaurant/restaurant.component.html</strong> to:</p>
<pre><code class="language-html">&lt;div class=&quot;restaurants&quot;&gt;
  &lt;h2 class=&quot;page-header&quot;&gt;Restaurants&lt;/h2&gt;
  &lt;form class=&quot;form&quot; [formGroup]=&quot;form&quot;&gt;
    &lt;div class=&quot;form-group&quot;&gt;
      &lt;label&gt;State&lt;/label&gt;
      &lt;select class=&quot;formControl&quot; formControlName=&quot;state&quot;&gt;
        &lt;option value=&quot;&quot; *ngIf=&quot;states.isPending&quot;&gt;Loading...&lt;/option&gt;
        &lt;ng-container *ngIf=&quot;!states.isPending&quot;&gt;
          &lt;option value=&quot;&quot;&gt;Choose a state&lt;/option&gt;
          &lt;option *ngFor=&quot;let state of states.value&quot; value=&quot;{{state?.short}}&quot;&gt; {{state?.name}}&lt;/option&gt;
        &lt;/ng-container&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
      &lt;label&gt;City&lt;/label&gt;
      &lt;select class=&quot;formControl&quot; formControlName=&quot;city&quot;&gt;
        &lt;option value=&quot;&quot; *ngIf=&quot;cities.isPending&quot;&gt;Loading...&lt;/option&gt;
        &lt;ng-container *ngIf=&quot;!cities.isPending&quot;&gt;
          &lt;option value=&quot;&quot;&gt;Choose a city&lt;/option&gt;
          &lt;option *ngFor=&quot;let city of cities.value&quot; value=&quot;{{city.name}}&quot;&gt; {{city.name}}&lt;/option&gt;
        &lt;/ng-container&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  &lt;/form&gt;

  &lt;div class=&quot;restaurant loading&quot; *ngIf=&quot;restaurants.isPending&quot;&gt;&lt;/div&gt;
  &lt;ng-container *ngIf=&quot;restaurants.value.length&quot;&gt;
    &lt;div class=&quot;restaurant&quot; *ngFor=&quot;let restaurant of restaurants.value&quot;&gt;

      &lt;img src=&quot;{{restaurant.images.thumbnail | imageUrl}}&quot; width=&quot;100&quot; height=&quot;100&quot;&gt;
      &lt;h3&gt;{{restaurant.name}}&lt;/h3&gt;

      &lt;div class=&quot;address&quot; *ngIf=&quot;restaurant.address&quot;&gt;
        {{restaurant.address.street}}&lt;br /&gt;{{restaurant.address.city}}, {{restaurant.address.state}} {{restaurant.address.zip}}
      &lt;/div&gt;

      &lt;div class=&quot;hours-price&quot;&gt;
        $$$&lt;br /&gt;
        Hours: M-F 10am-11pm
        &lt;span class=&quot;open-now&quot;&gt;Open Now&lt;/span&gt;
      &lt;/div&gt;

      &lt;a class=&quot;btn&quot; [routerLink]=&quot;['/restaurants', restaurant.slug]&quot;&gt;
        Details
      &lt;/a&gt;
      &lt;br /&gt;
    &lt;/div&gt;
  &lt;/ng-container&gt;
&lt;/div&gt;

</code></pre>
<div line-highlight='6,10,16,20,only'></div>

</section>

  			
  		
    </div>

    
      <div class="sidebar-right">
        <div class="content-nav on-this-page-container">
          <h6>On this page...</h6>
          <div class="list-items" id="scroll-toc">
            <bit-toc heading-container-selector="article.main" scroll-selector="#scroll-toc"></bit-toc>
          </div>
        </div>
        <div class="pullout slack">
          <h6>Get help</h6>
          <p>If you need <a href="https://join.slack.com/t/bitovi-community/shared_invite/enQtNTIzMTE5NzYxMjA3LWMwMzE4MjFkMTI5ZmZjNzllYjc2MzcxOWNmOTg3YjI4NjE0MGFkZGNkOTNlZjlkNDBhNTlmYTcwMzJlZDZjY2Y">help</a> with an exercise, please reach out to us on
             <a href="https://join.slack.com/t/bitovi-community/shared_invite/enQtNTIzMTE5NzYxMjA3LWMwMzE4MjFkMTI5ZmZjNzllYjc2MzcxOWNmOTg3YjI4NjE0MGFkZGNkOTNlZjlkNDBhNTlmYTcwMzJlZDZjY2Y">Slack</a></p>
        </div>
        <div class="pullout bug">
          <p>If you find a bug, please
             <a href="https://github.com/bitovi/academy/issues/new">create an issue</a> or email
             <a href="mailto:contact@bitovi.com?Subject=Training%20Suggestion" target="_blank">contact@bitovi.com<a/></p>
        </div>
      </div>
    

	</article>
</div>



  <footer></footer>

  <div id="scripts">
    <script type="text/javascript">
      var docObject = {"src":{"path":"src/angular/8-state-city-options/state-city-options.md"},"description":"Learn how to create a Reactive Form with Angular. We will create a Reactive Form in the Restaurant component with city and state dropdown inputs. \n","name":"learn-angular/state-city-options","title":"City & State Options","type":"page","parent":"learn-angular","order":8,"comment":" ","codepen":[["\"can\"","\"//unpkg.com/can@5/core.mjs\""],["\"can/everything\"","\"//unpkg.com/can@5/everything.mjs\""]],"pathToRoot":"../.."};
    </script>

    
      <script>
        steal = {
          instantiated: {
            "bundles/bit-docs-site/static.css!$css" : null
          }
        }
      </script>
      <script type='text/javascript'
          data-main="bit-docs-site/static"
          src="../static/steal.production.js"></script>
    

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2302003-12"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-2302003-12');
    </script>

  </div>
</body>
</html>

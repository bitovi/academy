<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE — ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: src/advanced-typescript/05-conditional-types/conditional-types.md
	@page advanced-typescript/conditional-types
######################################################################## -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="UMCgjrWAjJW_tHmYo6AerdZvVdmh8QHdY9Ywb59tpHw" />
  <meta name="description" content="Learn how to create new types to simplify functions and enforce type safety with conditional types! 
">
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-P9MQVJS');</script>
  <!-- End Google Tag Manager -->

  <title>Bitovi Academy - Conditional Types</title>
  
  <link rel="stylesheet" type="text/css" href="../static/bundles/bit-docs-site/static.css">
  
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P9MQVJS"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  
  <div class="header">
    <div class="logo">
      <a href="https://www.bitovi.com/">Bitovi</a>
    </div>
    <ul>
      <li><a href="https://www.bitovi.com/services">Services</a></li>
      <li><a href="https://www.bitovi.com/client-work">Client Work</a></li>
      <li><a href="https://www.bitovi.com/about">Our Team</a></li>
      <li><a href="https://www.bitovi.com/open-source">Open Source</a></li>
      <li><a href="https://www.bitovi.com/blog">Blog</a></li>
      <li><a href=".." class="active">Academy</a></li>
     </ul>
     <a class="contact-popup hs-button brand button-smallest" href="https://www.bitovi.com/contact">Contact Us</a>
  </div>

  <div class="content">
	
		<div class="sidebar-left">
  
    
	<ul>
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-advanced-javascript.html"
							title="This course covers all the hard but important stuff you should know when learning JavaScript.">
							Advanced JavaScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-dom-jquery.html"
							title="Learn jQuery and the DOM APIs by building your own version of jQuery and using it to make a basic tabs widget. We strongly suggest finishing learn-advanced-javascript prior to starting this course.">
							DOM and jQuery
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-to-debug-javascript.html"
							title="This course covers the basics of JavaScript debugging.">
							Debug JavaScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-typescript.html"
							title="This course covers the basic essentials of TypeScript. At the end, you should be ready to develop projects in TypeScript.">
							Learn TypeScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-react-vite.html"
							title="Learn React by building the feature-rich Place My Order application in this beginner React guide. This hands-on course will introduce you to fundamental React concepts! By the end of this course, you will have a strong understanding of JSX, functional components, styling, state management, Hooks, data fetching, routing, and testing.">
							Learn React
						</a>
						
					</li>
				
			
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-web-components.html"
							title="">
							Learn Web Components
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-agile-program-management-with-jira.html"
							title="Learn how to build, maintain, and report on accurate multi-team plans with Jira.">
							Agile Program Management With Jira
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-rxjs.html"
							title="Learn RxJS by creating a validating credit card form.">
							Learn RxJS
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../training.html"
							title="Learn how to prepare and give a training.">
							Giving a Training
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-technology-consulting.html"
							title="Learn how to move beyond writing code to be an excellent technology consultant!">
							Learn Technology Consulting
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-react.html"
							title="Learn React by building a feature-rich Tic-Tac-Toe game in this beginner React guide. This hands-on course will introduce both fundamental and more advanced React concepts! By the end of this course, you will have mastered functional components, hooks, and component optimization.">
							Learn React
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-ngrx.html"
							title="Learn how to manage state in an Angular application using NgRx.">
							Learn NgRx
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-graphql.html"
							title="Build a backend application for property rentals using Node JS, GraphQL and Apollo Server.         Learn about using ORMs like Mongoose and Prisma with a NoSQL Mongo database!
Write testcases testing created endpoints.">
							Learn Graphql
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-docker.html"
							title="Build and containerize a Node.js app then orchestrate multiple containers with docker-compose in this Docker guide.">
							Learn Docker
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-canjs.html"
							title="This tutorial walks through building TodoMVC with StealJS. It includes KeyNote presentations
covering CanJS core libraries.">
							Learn CanJS
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../learn-angular.html"
							title="Learn how to build a moderately complex application with Angular.">
							Learn Angular
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						parent
           						expanded">
						<a class="page"
							href="../advanced-typescript.html"
							title="This is the second course in the TypeScript series. By the end, you will be comfortable with any types you come across and possess the knowledge to create your own advanced types. The only prerequisite is the first course in the TypeScript series found here.">
							Advanced TypeScript
						</a>
						
							
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="typing-systems.html"
							title="">
							Typing Systems
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="generics-with-constraints.html"
							title="Learn how to constrain generics to be able to reuse even more logic!">
							Generics With Constraints
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="index-accessed-types.html"
							title="Learn how to look up types of properties with index accessed types!">
							Index Accessed Types
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="mapped-types.html"
							title="Learn how to create new types with mapped types!">
							Mapped Types
						</a>
						
					</li>
				
			
		
			
				
					<li class="current
           						parent
           						expanded">
						<a class="page"
							href="conditional-types.html"
							title="Learn how to create new types to simplify functions and enforce type safety with conditional types!">
							Conditional Types
						</a>
						
							

						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="template-literal-types.html"
							title="Learn what template literal types are and how to empower them with unions, generics, conditional types, and infer!">
							Template Literal Types
						</a>
						
					</li>
				
			
		
	</ul>


						
					</li>
				
			
		
	</ul>


  
  <p class="border">
      <a href="..#courses">View More Courses</a>
      <a class='bit-academy-fullscreen' title='fullscreen' href="javascript://">[ ]</a>
  </p>
</div>

	
	<article class="main">
    <div class="main-content">
  		
  			<section class="title">
	<h1>Conditional Types <code>page</code></h1>
</section>

  		

  		
  			
  				<section class="description">
    <p>Learn how to create new types to simplify functions and enforce type safety with conditional types!</p>

</section>

  			
  		

  		
  			
  				
  			
  			
  				<section class="body">
    <h2>Overview</h2>
<p>In this section, we will take a look at <code>any</code> and <code>never</code> again, the roles they play within TypeScript’s type system, along with their impact when mixed in with other types. We will also look at conditional types, what they are, how they behave, and how they can make our function signatures simpler with little overhead by defining complex types. Finally, we will discuss another use of conditional types and introduce a new syntax – <code>infer</code> – which makes conditional types even more powerful.</p>
<h2>Top and Bottom Types</h2>
<p>Within type systems there exists a top type and a bottom type. A top type contains all types, meaning any other type is assignable to it. A bottom type is assignable to nothing. Going back to thinking of types in TypeScript as sets, the top type would be a superset containing all the other types; the bottom type would be the empty set containing nothing. TypeScript has two top types – <code>any</code> and <code>unknown</code> and a single bottom type <code>never</code>.</p>
<p>We briefly touched on <code>any</code> and <code>never</code> in the introductory course. As a quick recap, any variable assigned type <code>any</code> essentially opts out of typing, as it can be anything. <code>unknown</code> is just like any but the only thing assignable to it is <code>any</code>.</p>
<pre><code class="language-ts">let anything: any = 1;

anything = &quot;hello world&quot;;
anything = {};
anything = [1, 2, 3];
anything = new Promise(() =&gt; {});
</code></pre>
<p><code>never</code> is not assignable to anything. Two common cases when never shows up are a throwing function…</p>
<pre><code class="language-ts">function throwError(message: string): never {
  throw new Error(message);
}
</code></pre>
<p>…and when TypeScript has exhausted all possible cases and determines a block of code won’t run:</p>
<pre><code class="language-ts">function primaryColorsToHexMessage(primaryColor: &quot;red&quot; | &quot;blue&quot; | &quot;yellow&quot;) {
  switch (primaryColor) {
    case &quot;red&quot;:
      return primaryColor + &quot; is 0xFF0000&quot;;
    case &quot;blue&quot;:
      return primaryColor + &quot; is 0x00FF00&quot;;
    case &quot;yellow&quot;:
      return primaryColor + &quot; is 0xFFFF00&quot;;
    default:
      primaryColor; // primaryColor is never here.
  }
}
</code></pre>
<p><code>any</code> and <code>never</code> have unique impacts on the set operators we use to create types in TypeScript. When we union any type with <code>any</code> the resulting type will be <code>any</code> and if we union a type with <code>never</code> the resulting type will be whatever else is in the union.</p>
<pre><code class="language-ts">type UnionWithAny = string | any; // any
type UnionWithNever = string | never; // string
</code></pre>
<p>Type intersections with <code>any</code> behave in a similar way – a type intersected with <code>any</code> is <code>any</code>. <code>never</code> has a different behavior though and a type intersected with <code>never</code> is <code>never</code>.</p>
<pre><code class="language-ts">type IntersectionWithAny = string &amp; any; // any
type IntersectionWithNever = string &amp; never; // never
</code></pre>
<p>Unions with bottom types will be especially important for us moving forward as we talk about conditional types.</p>
<h2>Conditional Types</h2>
<p>Conditional types act exactly as conditional statements do in programming – the output is based on whether or not an input satisfies a given condition. Conditional types allow us to define different types based on the type passed in as an input. The syntax for conditional types mimics that of a JavaScript ternary and the condition is specified just like a constraint on a generic.</p>
<pre><code class="language-ts">type extends OtherThing ? TypeIfConditionIsMet : TypeIfConditionIsNotMet
</code></pre>
<p>One of the best ways to illustrate the utility of conditional typing is to see how it can help simplify overloaded functions. Take the <code>createBattle</code> function shown below.</p>
<pre><code class="language-ts">type TrainerBattle = {
  challenger: string;
};

type WildPokemonBattle = {
  challengingPokemon: string;
};

type GymLeaderBattle = {
  gymLeader: string;
  rewards: object;
};

function createBattle(battle: &quot;trainer-battle&quot;): TrainerBattle;
function createBattle(battle: &quot;wild-pokemon-battle&quot;): WildPokemonBattle;
function createBattle(
  battle: &quot;trainer-battle&quot; | &quot;wild-pokemon-battle&quot;
): TrainerBattle | WildPokemonBattle {
  // Implementation detail
}

const trainer = createBattle(&quot;trainer-battle&quot;); // Type is TrainerBattle
const wild = createBattle(&quot;wild-pokemon-battle&quot;); // Type is WildPokemonBattle
</code></pre>
<p>The function overloads show we want the output type for the function to be based on the type put in. In this case, if <code>&quot;trainer-battle&quot;</code> is input, <code>TrainerBattle</code> should be the output; if <code>&quot;wild-pokemon-battle&quot;</code> is input, <code>WildPokemonBattle</code> should be output. We can use generics and conditional types to simplify this function signature.</p>
<pre><code class="language-ts">type BattleTypes = &quot;trainer-battle&quot; | &quot;wild-pokemon-battle&quot;;

type Battle&lt;T extends BattleTypes&gt; = T extends &quot;wild-pokemon-battle&quot;
  ? WildPokemonBattle
  : TrainerBattle;

function createBattle&lt;T extends BattleTypes&gt;(battle: T): Battle&lt;T&gt; {
  // Implementation detail
}

const trainer = createBattle(&quot;trainer-battle&quot;); // Type is TrainerBattle
const wild = createBattle(&quot;wild-pokemon-battle&quot;); // Type is WildPokemonBattle
</code></pre>
<div line-highlight='1,3-5,7-8,'></div>
<p>The magic here happens in the <code>Battle</code> conditional type. In <code>Battle</code> we look for whichever <code>BattleType</code> is passed in. If it’s <code>&quot;wild-pokemon-battle&quot;</code> we resolve to <code>WildPokemonBattle</code>, otherwise we resolve to <code>TrainerBattle</code>. Another cool feature of conditional types is that they are nestable. To demonstrate this, let’s take this battle situation a step further and make a couple of adjustments. Let’s add a third battle type.</p>
<pre><code class="language-ts">type TrainerBattle = {
  challenger: string;
};

type WildPokemonBattle = {
  challengingPokemon: string;
};

type GymLeaderBattle = {
  gymLeader: string;
  rewards: object;
};

type BattleTypes =
  | &quot;trainer-battle&quot;
  | &quot;wild-pokemon-battle&quot;
  | &quot;gym-leader-battle&quot;;
</code></pre>
<p>How then would we update our conditional type? Well, it turns out we can update the conditionals just like we would when we nest JavaScript ternaries.</p>
<pre><code class="language-ts">type Battle&lt;T extends _BattleTypes&gt; = T extends &quot;trainer-battle&quot;
  ? TrainerBattle
  : T extends &quot;wild-pokemon-battle&quot;
  ? WildPokemonBattle
  : GymLeaderBattle;
</code></pre>
<div line-highlight='2-5'></div>
<p>And just like that, we’ve added another possible battle without having to touch the createBattle function signature.</p>
<pre><code class="language-ts">const trainer = createBattle(&quot;trainer-battle&quot;); // Type is TrainerBattle
const wild = createBattle(&quot;wild-pokemon-battle&quot;); // Type is WildPokemonBattle
const gym = createBattle(&quot;gym-leader-battle&quot;); // Type is GymLeaderBattle
</code></pre>
<h2>Conditional Types With Unions</h2>
<p>Conditional types shine when it comes to refining unions into more distilled types. When given a union, conditional types distribute the condition to each member of the union. One of the simplest applications of this is the <code>NonNullable&lt;T&gt;</code> utility type provided by TypeScript. <code>NonNullable</code> creates a new type by removing <code>null</code> and <code>undefined</code> from the type passed into it.</p>
<pre><code class="language-ts">type MaybeStringOrNumber = string | number | undefined | null;

type StringOrNumber = NonNullable&lt;MaybeStringOrNumber&gt;; // string | number
</code></pre>
<p>Below is the definition of <code>NonNullable</code>.</p>
<pre><code class="language-ts">/**
 * Exclude null and undefined from T
 */
type NonNullable&lt;T&gt; = T extends null | undefined ? never : T;
</code></pre>
<p>The definition may look complicated, but as we did with mapped types, let’s remove some of the noise and break it down bit by bit to see how this works. Let’s start by placing the union into <code>NonNullable</code> directly.</p>
<pre><code class="language-ts">type StringOrNumber = NonNullable&lt;string | number | undefined | null&gt;;
</code></pre>
<div line-highlight='1'></div>
<p>Since we passed in a union, TypeScript will distribute the <code>NonNullable</code> to each member of the union.</p>
<pre><code class="language-ts">type StringOrNumber =
  | NonNullable&lt;string&gt;
  | NonNullable&lt;number&gt;
  | NonNullable&lt;undefined&gt;
  | NonNullable&lt;null&gt;;
</code></pre>
<div line-highlight='2-5'></div>
<p>From here we can remove the generics and each of the <code>NonNullable</code> can be rewritten as a conditional.</p>
<pre><code class="language-ts">type StringOrNumber =
  | (string extends null | undefined ? never : string)
  | (number extends null | undefined ? never : number)
  | (undefined extends null | undefined ? never : undefined)
  | (null extends null | undefined ? never : null);
</code></pre>
<div line-highlight='2-5'></div>
<p>Each of these conditionals can then be evaluated.</p>
<pre><code class="language-ts">type StringOrNumber = string | number | never | never;
</code></pre>
<div line-highlight='1'></div>
<p>As we discovered in the first section, <code>never</code> doesn’t impact the results of the union and can be removed. Removing the <code>never</code>s from the union leaves us with our final result.</p>
<pre><code class="language-ts">type StringOrNumber = string | number;
</code></pre>
<div line-highlight='1'></div>
<p>The refinement aspects of conditional types become even stronger when used in conjunction with other TypeScript features we’ve seen so far. Let’s do a little more tweaking to our types from the <code>createBattle</code> example above and define a function called <code>emitBattleStart</code> that can take a battle name and a payload that corresponds to the properties in the named typed.</p>
<pre><code class="language-ts">emitBattleStart(&quot;wild-pokemon-battle&quot;, { challengingPokemon: &quot;onix&quot; });
</code></pre>
<p>Before we start looking at the <code>emitBattle</code> function let’s make our types a little more functional. Instead of having <code>BattleTypes</code> separated from the rest of the battle types, we could use them as literals on our battle types to create a discriminating union.</p>
<pre><code class="language-ts">type TrainerBattle = {
  battleType: &quot;trainer-battle&quot;;
  challenger: string;
};

type WildPokemonBattle = {
  battleType: &quot;wild-pokemon-battle&quot;;
  challengingPokemon: string;
};

type GymLeaderBattle = {
  battleType: &quot;gym-leader-battle&quot;;
  gymLeader: string;
  rewards: object;
};

type PokemonBattles = TrainerBattle | WildPokemonBattle | GymLeaderBattle;
</code></pre>
<blockquote>
<p>If you’re curious about how this might impact the createBattle function types we defined previously, those could now be rewritten as…</p>
<pre><code class="language-ts">type Battle&lt;T extends PokemonBattles[&quot;battleType&quot;]&gt; =
  T extends &quot;trainer-battle&quot;
    ? TrainerBattle
    : T extends &quot;wild-pokemon-battle&quot;
    ? WildPokemonBattle
    : GymLeaderBattle;

function createBattle&lt;T extends PokemonBattles[&quot;battleType&quot;]&gt;(
  battle: T
): Battle&lt;T&gt; {
  // Implementation detail
}
</code></pre>
</blockquote>
<div line-highlight='1, 8'></div>
<p>To create our <code>emitBattleStart</code> function let’s first start by getting the first parameter in place.</p>
<pre><code class="language-ts">function emitBattleStart&lt;BattleType extends PokemonBattles[&quot;battleType&quot;]&gt;(
  battleType: BattleType,
  battleInformation: BattleInfomation // ??? To be defined below
) {
  /** ... */
}
</code></pre>
<p>The next part is where it gets tricky. Somehow we need to get the correct object shape for the battle information. We can break it down like this. First, we need to select the member of the <code>PokemonBattles</code> union that corresponds to the <code>BattleType</code> from the first parameter of the function. Second, we need to remove the <code>battleType</code> key from that type. And finally, we need to map over the new keys, making sure they have the same values.</p>
<p>Starting with the first step, let’s find a way to select the correct member of the <code>PokemonBattles</code> union. We can accomplish this with our good friend conditional types. We can use generics to give our <code>BattleInformation</code> type access to the <code>PokemonBattles</code> union and the <code>BattleType</code> and inside it uses a conditional type to refine the union to being the battle type we’re after.</p>
<pre><code class="language-ts">type BattleInformation&lt;BattleType, Battle&gt; = Battle extends {
  battleType: BattleType;
}
  ? Battle
  : never;
</code></pre>
<blockquote>
<p>If this looks a little complicated it helps to throw one of the <code>battleTypes</code> in there real quick to get a better feel for it.</p>
<pre><code class="language-ts">type WildBattleFromUnion = BattleInformation&lt;
  &quot;wild-pokemon-battle&quot;,
  PokemonBattles
&gt;;
</code></pre>
<p>which inside the <code>BattleInformation</code> type looks like…</p>
<pre><code class="language-ts">TrainerBattle | WildPokemonBattle | GymLeaderBattle
  extends {battleType: 'wild-pokemon-battle'} ? Battle : never
</code></pre>
</blockquote>
<p>Next, we need a way to get rid of the <code>battleType</code> key from this new type. Luckily for us, TypeScript provides a utility type that does just that – <code>Exclude</code>. Exclude takes two unions and <strong>excludes</strong> the members of the second union from the first. As you might have guessed, <code>Exclude</code> uses conditional types under the hood to provide this functionality. For our case, we want to exclude <code>battleType</code> from the keys of the battle.</p>
<pre><code class="language-ts">Exclude&lt;keyof Battle, &quot;battleType&quot;&gt;;
</code></pre>
<p>Our final step is to map over these and reconstruct the type. To do this, let’s define a <code>FormatBattle</code> type that does this for us and pass our refined <code>Battle</code> type into it.</p>
<pre><code class="language-ts">type FormatBattle&lt;Battle&gt; = {
  [FilteredKey in Exclude&lt;keyof Battle, &quot;battleType&quot;&gt;]: Battle[FilteredKey];
};

type BattleInformation&lt;BattleType, Battle&gt; = Battle extends {
  battleType: BattleType;
}
  ? FormatBattle&lt;Battle&gt;
  : never;
</code></pre>
<div line-highlight='1-3, 8'></div>
<p>With that, we have finished up our typing issues! Our function now has type-safety and we can use it as we desire.</p>
<pre><code class="language-ts">function emitBattleStart&lt;BattleType extends PokemonBattles[&quot;battleType&quot;]&gt;(
  battleType: BattleType,
  battleInformation: BattleInfomation&lt;BattleType, PokemonBattles&gt;
){ /** ... */}

emitBattleStart(&quot;wild-pokemon-battle&quot;, {challengingPokemon: 'onix'});
emitBattleStart(&quot;trainer-battle&quot;, {challenger: 'gary'})
emitBattleStart(
  &quot;gym-leader-battle&quot;,
  {
    gymLeader: &quot;Misty&quot;
    rewards: {badge: 'Cascade Badge'}
  }
)
</code></pre>
<div line-highlight='3, 7-13'></div>
<p>That said, we can take it a little bit further and add an alias and default to help make the typing a bit more semantic. It feels a little weird needing to pass in <code>PokemonBattles</code>, and the functionality of the type and how it’s used seem to differ a bit. One extra type we can resolve this. Let’s update <code>BattleInformation</code> to alias our conditional mapping and give a more semantically relevant name like <code>GetBattleInformation</code>.</p>
<pre><code class="language-ts">type FormatBattle&lt;Battle&gt; = {
  [FilterKey in Exclude&lt;keyof Battle, &quot;battleType&quot;&gt;]: Battle[FilterKey];
};

type GetBattleInformation&lt;BattleType, Battle&gt; = Battle extends {
  battleType: BattleType;
}
  ? FormatBattle&lt;Battle&gt;
  : never;

type BattleInformation&lt;
  BattleType,
  Battles = PokemonBattles
&gt; = GetBattleInformation&lt;BattleType, Battles&gt;;

function emitBattleStart&lt;BattleType extends PokemonBattles[&quot;battleType&quot;]&gt;(
  battleType: BattleType,
  battleInformation: BattleInformation&lt;BattleType&gt;
) {
  //
}
</code></pre>
<div line-highlight='5-9, 13-14, 18'></div>
<h2>A New and Powerful Syntax</h2>
<p>Another use case of conditional types is to give us access to types we wouldn’t normally have access to by allowing us to unwrap types. A greater example of this is an <code>ArrayElement</code> type which checks if the type is an array and if it is, uses index accessed types to grab the shape inside.</p>
<pre><code class="language-ts">type ArrayElement&lt;T&gt; = T extends Array&lt;any&gt; ? T[number] : never;
</code></pre>
<p>This type of usage is so common that TypeScript added an <code>infer</code> keyword that allows us to define a new generic variable within the extends clause of a conditional type to be used in our different paths.</p>
<pre><code class="language-ts">type ArrayElement&lt;T&gt; = T extends Array&lt;infer ElementType&gt; ? ElementType : never;
</code></pre>
<div line-highlight='1'></div>
<p><code>infer</code> powers many utility types in TypeScript like <code>ReturnType</code> and <code>Parameters</code>.</p>
<pre><code class="language-ts">/**
 * Obtain the parameters of a function type in a tuple
 */
type Parameters&lt;T extends (...args: any) =&gt; any&gt; = T extends (
  ...args: infer P
) =&gt; any
  ? P
  : never;

/**
 * Obtain the return type of a function type
 */
type ReturnType&lt;T extends (...args: any) =&gt; any&gt; = T extends (
  ...args: any
) =&gt; infer R
  ? R
  : any;
</code></pre>
<p>Conditional type’s refinement makes it a powerful utility. We’ve seen how conditional types can be used to simplify function signatures and create robust types for complex functions. Conditional types and <code>infer</code> will play a big role in our last section: template literal types.</p>
<h2>Exercises</h2>
<h3>Exercise 1</h3>
<p>We used exclude in one of the examples in the content of this section.
Let’s take a moment to create the type ourselves. Exlude takes two generics
<code>T</code> and <code>U</code> and removes the memebers in <code>U</code> from <code>T</code>.</p>
<pre><code class="language-ts">type WildPokemonBattle = {
  battleType: &quot;wild-pokemon-battle&quot;;
  challengingPokemon: string;
};

type WildPokemonBattleNoBattleType = _Exclude&lt;
  keyof WildPokemonBattle,
  &quot;battleType&quot;
&gt;; // &quot;challengingPokemon&quot;
</code></pre>
<p><a href="https://codesandbox.io/s/1gvoo5?file=/05-conditional-types-ex-01.ts">Open in CodeSandbox</a></p>
<pre><code class="language-ts">/**
 * Exercise 1
 *
 * We used exclude in one of the examples in the content of this section.
 * Let’s take a moment to create the type ourselves. Exlude takes two generics
 * `T` and `U` and removes the memebers in `U` from `T`.
 *
 * ```ts
 * type WildPokemonBattle = {
 *   battleType: &quot;wild-pokemon-battle&quot;;
 *   challengingPokemon: string;
 * };
 *
 * type WildPokemonBattleNoBattleType = _Exclude&lt;keyof WildPokemonBattle, &quot;battleType&quot;&gt;; // &quot;challengingPokemon&quot;
 * ```
 */
type _Exclude&lt;T, U&gt; = any;

</code></pre>
<p><details>
<summary>Click to see the solution</summary></p>
<pre><code class="language-ts">type _Exclude&lt;T, U&gt; = T extends U ? never : T;

</code></pre>
<div line-highlight='1'></div>
<p></details></p>
<h3>Exercise 2</h3>
<p>Let’s build out an example similar to <code>ArrayElement</code> provided by the TypeScript documentation (No cheating by looking it up!)</p>
<p><code>Flatten</code> should a new type that unnests arrays by one level.</p>
<pre><code class="language-ts">type FlattenedStringArray = Flatten&lt;string[]&gt;; // string
type FlatString = Flatten&lt;string&gt;; // string

type NestedNumberArray = Flatten&lt;Array&lt;Array&lt;number&gt;&gt;&gt;; // number []
</code></pre>
<p><a href="https://codesandbox.io/s/r5ch7w?file=/05-conditional-types-ex-02.ts">Open in CodeSandbox</a></p>
<pre><code class="language-ts">/**
 Exercise 2
 *
 * Let’s build out an example similar to `ArrayElement` provided by the TypeScript documentation (No cheating by looking it up!)
 *
 * `Flatten` should create a new type that unnests arrays by one level.
 *
 * ```ts
 * type FlattenedStringArray = Flatten&lt;string[]&gt; // string
 * type FlatString = Flatten&lt;string&gt; // string
 *
 * type NestedNumberArray = Flatten&lt;Array&lt;Array&lt;number&gt;&gt;&gt; // number []
 * ```
 */
type Flatten&lt;T&gt; = any;

type FlattenedStringArray = Flatten&lt;string[]&gt;; // string
type FlatString = Flatten&lt;string&gt;; // string
type NestedNumberArray = Flatten&lt;Array&lt;Array&lt;number&gt;&gt;&gt;; // number []

</code></pre>
<p><details>
<summary>Click to see the solution</summary></p>
<pre><code class="language-ts">export type Flatten&lt;T&gt; = T extends Array&lt;infer R&gt; ? R : T;

</code></pre>
<div line-highlight='1'></div>
<p></details></p>

</section>

  			
  			<bit-prev-next class="footer" list-selector=".sidebar-left ul li.parent.expanded ul"></bit-prev-next>
  		
    </div>

    
      <div class="sidebar-right">
        <div class="content-nav on-this-page-container">
          <h6>On this page...</h6>
          <div class="list-items" id="scroll-toc">
            <bit-toc heading-container-selector="article.main" scroll-selector="#scroll-toc"></bit-toc>
          </div>
        </div>
        <div class="pullout discord">
          <h6>Get help</h6>
          <p>If you need <a href="https://discord.gg/J7ejFsZnJ4">help</a> with an exercise, please reach out to us on
             <a href="https://discord.gg/J7ejFsZnJ4">Discord</a></p>
        </div>
        <div class="pullout bug">
          <p>If you find a bug, please
             <a href="https://github.com/bitovi/academy/issues/new">create an issue</a> or email
             <a href="mailto:contact@bitovi.com?Subject=Training%20Suggestion" target="_blank">contact@bitovi.com</a></p>
        </div>
      </div>
    

	</article>
</div>



  <footer></footer>

  <div id="scripts">
    <script type="text/javascript">
      var docObject = {"src":{"path":"src/advanced-typescript/05-conditional-types/conditional-types.md"},"description":"Learn how to create new types to simplify functions and enforce type safety with conditional types! \n","name":"advanced-typescript/conditional-types","title":"Conditional Types","type":"page","parent":"advanced-typescript","order":5,"comment":" ","pathToRoot":"../.."};
    </script>

    
      <script>
        steal = {
          instantiated: {
            "bundles/bit-docs-site/static.css!$css" : null
          }
        }
      </script>
      <script type='text/javascript'
          data-main="bit-docs-site/static"
          src="../static/steal.production.js"></script>
    

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2302003-12"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-2302003-12');
    </script>

  </div>
  <div id="email-modal" role="dialog" aria-modal="true" aria-labelledby="dialog_label" style="display: none;">
    <div aria-hidden="true" class="email-modal-backdrop"></div>
    <div role="region" class="email-modal-content">
      <h2 id="dialog_label">Join the Bitovi Newsletter</h2>
      <p>
        Do you want to receive updates about new Bitovi Academy courses, Bitovi open source projects, and dev community news? If so, please provide your email. We won’t spam you or give it away for any reason!<br />
        <i style="font-size: 0.8rem;">By providing your email you agree to receive communications from Bitovi</i>
      </p>
      <div id="academy-hubspot-form-embed"></div>
      <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/embed/v2.js"></script>
      <button id="email-modal-close" title="dismiss"><img src="../static/img/close.svg" height="24" width="24"></button>
    </div>
  </div>
</body>
</html>

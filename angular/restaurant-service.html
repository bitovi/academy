<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE â€” ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: src/angular/6-restaurant-service/restaurant-service.md
	@page angular/restaurant-service
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Bitovi University - Writing a Restaurant Service</title>
	
	<link rel="stylesheet" type="text/css" href="../static/bundles/bit-docs-site/static.css">
	
</head>

<body>
	<header></header>
	<div class="content">
	
		<nav class="sidebar">
	
		
			<ul>
				<li class="">
					<a class="home" href="../index.html" title="Home">
						Home
					</a>
				</li>
			</ul>
		
		
	<ul>
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../advanced-javascript-training.html"
							title="This course covers all the hard but important stuff you should know when learning JavaScript.">
							Advanced JavaScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../dom-jquery-training.html"
							title="Learn jQuery and the DOM APIs by building your own version of jQuery and using it to make a basic tabs widget.">
							DOM and jQuery
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../debugging-javascript-training.html"
							title="This course covers the basics of JavaScript debugging.">
							Debug JavaScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../typescript.html"
							title="This course covers the basic essentials of TypeScript. At the end, you should be ready to develop projects in TypeScript.">
							TypeScript
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../react.html"
							title="This guide introduces React, the things you should learn before approaching React, and some advanced React topics.">
							React
						</a>
						
					</li>
				
			
		
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../RxJS.html"
							title="Learn RxJS by creating a validating credit card form.">
							RxJS
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						parent
           						expanded">
						<a class="page"
							href="../angular.html"
							title="Learn the basics of Angular.">
							Angular
						</a>
						
							
	<ul>
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="why-angular.html"
							title="Why Angular is a great choice for modern web application development.">
							Why Angular
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="building-our-first-app.html"
							title="Building Our First App">
							Building Our First App
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="creating-components.html"
							title="Creating Our First Components">
							Creating Components
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="adding-routing.html"
							title="Adding Routing">
							Adding Routing
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="creating-navigation.html"
							title="Creating Navigation">
							Creating Navigation
						</a>
						
					</li>
				
			
		
			
				
					<li class="current
           						parent
           						expanded">
						<a class="page"
							href="restaurant-service.html"
							title="Writing a Restaurant Service">
							Writing a Restaurant Service
						</a>
						
							

						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="pull-restaurant-data-into-view.html"
							title="Pulling Restaurant Data into Our View">
							Use Restaurant API data
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="state-city-options.html"
							title="Creating city &amp; state options for filtering restaurants">
							City &amp; State Options
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="form-value-changes.html"
							title="Listening to Form Value Changes">
							Listening to Form Value Changes
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="updating-service-params.html"
							title="Updating Restaurant Service to use params">
							Filtering Cities &amp; Restaurants
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="nested-routes.html"
							title="Creating nested restaurant routes">
							Nested Restaurant Routes
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="building-order-form.html"
							title="Building the Order Form">
							Building the Order Form
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="order-service.html"
							title="Writing the Order Service">
							Order Service
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="order-history-component.html"
							title="Writing the Order History Component">
							Order History Component
						</a>
						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="real-time-connection.html"
							title="Updating Order History View with Real Time Connection">
							Real Time Connections
						</a>
						
					</li>
				
			
		
	</ul>


						
					</li>
				
			
		
			
				
					<li class="
           						
           						">
						<a class="page"
							href="../training.html"
							title="Learn how to prepare and give a training.">
							Giving a Training
						</a>
						
					</li>
				
			
		
	</ul>


	
</nav>

	
	<article class="main">
		
			<section class="title">
	<h1>Writing a Restaurant Service <code>page</code></h1>
</section>

		

		
			
				<section class="description">
    <p>Writing a Restaurant Service</p>

</section>

			
		

		
			
				
			
			
				<section class="body">
    <h2>Overview</h2>
<p>In this part, we will:</p>
<ul>
<li>Install the place-my-order API</li>
<li>Create a proxy to serve the API</li>
<li>Update <code>npm start</code> script</li>
<li>Generate a new service via the CLI</li>
<li>Write a method to make an http request</li>
</ul>
<h2>Installing the Place My Order API</h2>
<p>We've done some work to create a Place My Order API for use in this app.</p>
<pre><code class="language-bash">npm install place-my-order-api@1 --save
</code></pre>
<p>Next make add an api script to your <code>package.json</code></p>
<pre><code class="language-js">  &quot;scripts&quot;: {
    &quot;ng&quot;: &quot;ng&quot;,
    &quot;start&quot;: &quot;ng serve&quot;,
    &quot;build&quot;: &quot;ng build&quot;,
    &quot;test&quot;: &quot;ng test&quot;,
    &quot;lint&quot;: &quot;ng lint&quot;,
    &quot;e2e&quot;: &quot;ng e2e&quot;,
    &quot;api&quot;: &quot;place-my-order-api --port 7070&quot;
  }
</code></pre>
<div line-highlight='8'></div>
<p>Double check the api is working by running <code>npm run api</code> and navigating to <a href="http://localhost:7070/restaurants" target="\_blank">localhost:7070/restaurants</a>. You should see a JSON list of restaurant data. It will be helpful to have a second terminal tab to run the api command from.</p>
<h2>Create a Proxy to Serve API</h2>
<p>Next, we'll create a proxy file at the root of our Angular project to access our API for local development purposes.</p>
<pre><code class="language-bash">touch proxy.conf.json
</code></pre>
<pre><code class="language-js">{
  &quot;/api&quot;: {
    &quot;target&quot;: &quot;http://localhost:7070&quot;,
    &quot;secure&quot;: false,
    &quot;pathRewrite&quot;: {
      &quot;^/api&quot;: &quot;&quot;
    },
    &quot;logLevel&quot;: &quot;debug&quot;,
    &quot;changeOrigin&quot;: true
  }
}
</code></pre>
<p>Update the package.json <code>npm start</code> script to be <code>ng serve --proxy-config proxy.conf.json</code></p>
<pre><code class="language-js">&quot;scripts&quot;: {
  &quot;ng&quot;: &quot;ng&quot;,
  &quot;start&quot;: &quot;ng serve --proxy-config proxy.conf.json&quot;,
  &quot;build&quot;: &quot;ng build&quot;,
  &quot;test&quot;: &quot;ng test&quot;,
  &quot;lint&quot;: &quot;ng lint&quot;,
  &quot;e2e&quot;: &quot;ng e2e&quot;,
  &quot;api&quot;: &quot;place-my-order-api --port 7070&quot;
},
</code></pre>
<div line-highlight='3'></div>
<p>Now, restart our app using <code>npm start</code> and it will run it with the proxy config we created. To test that it's working, navigate to <a href="http://localhost:4200/api/restaurants" target="_blank">http://localhost:4200/api/restaurants</a> and you should be able to see a list of restaurants.</p>
<h2>Importing <code>HttpClientModule</code> into <em>app.module.ts</em></h2>
<p>For making HTTP requests to interact with an API, Angular provides a HttpClient Module. To use it we'll need to import it in the root module of our app and include it the imports array.</p>
<p><strong>src/app/app.module.ts</strong></p>
<pre><code class="language-ts">import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { HttpClientModule } from '@angular/common/http';

import { AppRoutingModule } from './app-routing.module';
import { AppComponent } from './app.component';
import { RestaurantComponent } from './restaurant/restaurant.component';
import { HomeComponent } from './home/home.component';
import { ImageUrlPipe } from './image-url.pipe';

@NgModule({
  declarations: [
    AppComponent,
    RestaurantComponent,
    HomeComponent,
    ImageUrlPipe
  ],
  imports: [
    BrowserModule,
    AppRoutingModule,
    HttpClientModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }

</code></pre>
<div line-highlight='3,21'></div>
<p>We're going to write interfaces to tell Typescript what we expect a restaurant and other related objects to look like. We'll create a new file to house these.</p>
<pre><code class="language-bash">touch src/app/restaurant/restaurant.ts
</code></pre>
<p><strong>src/app/restaurant/restaurant.ts</strong></p>
<pre><code class="language-ts">interface Item {
    name: string;
    price: number;
}

interface Menu {
    lunch: Array&lt;Item&gt;;
    dinner: Array&lt;Item&gt;;
}

interface Address {
    street: string;
    city: string;
    state: string;
    zip: string;
}

interface Images {
    thumbnail: string;
    owner: string;
    banner: string;
}

export interface Restaurant {
    name: string;
    slug: string;
    images: Images;
    menu: Menu;
    address: Address;
    _id: string;
}

</code></pre>
<p>Now that we have our interface defined, we'll create a Service to handle getting our restaurant data. Services are classes with narrow purposes that don't typically involve view-related functionality.</p>
<pre><code class="language-bash">ng g service restaurant/restaurant
</code></pre>
<p>In our newly created service file, we'll need to import HttpClient.</p>
<p><strong>src/app/restaurant/restaurant.service.ts</strong></p>
<pre><code class="language-ts">import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';

import { Restaurant } from './restaurant';

export interface ResponseData {
  data: Restaurant[];
}

@Injectable({
  providedIn: 'root'
})
export class RestaurantService {

  constructor(private httpClient: HttpClient) { }

  getRestaurants() {
    return this.httpClient.get&lt;ResponseData&gt;('/api/restaurants');
  }
}

</code></pre>
<div line-highlight='2, 4, 6-8, 15, 17-19'></div>
<p>In the next step we'll call the <code>getRestaurants</code> method in our component to get the list of restaurants.</p>

</section>

			
		
	</article>
</div>

	<footer></footer>

	<script type="text/javascript">
		var docObject = {"src":{"path":"src/angular/6-restaurant-service/restaurant-service.md"},"description":"Writing a Restaurant Service \n","name":"angular/restaurant-service","title":"Writing a Restaurant Service","type":"page","parent":"angular","order":6,"comment":" ","pathToRoot":"../.."};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="../static/steal.production.js"></script>
	

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-2302003-29"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-2302003-29');
</script>

</body>

</html>

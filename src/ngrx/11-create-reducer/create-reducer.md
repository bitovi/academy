@page learn-ngrx/create-reducer Create a Reducer
@parent learn-ngrx 11

@description Learn how to create an NgRx reducer.

@body

> **Quick Start**: You can checkout [this branch](https://github.com/bitovi/angular-ngrx-chat/tree/test-redirect-effects) to get your codebase ready to work on this part.

## Overview

1. Define Login state shape

2. Set Login initial state

3. Update Reducer function to include handler for `LoginActions.loginSuccess` to update Login state

4. Update Reducer function to include handler for `LoginActions.logoutSuccess` to reset Login state

## Problem 1: TODO

TODO

## P1: What You Need to Know

TODO

## P1: Solution

<details>
<summary>src/app/store/login/login.reducer.ts</summary>

@diff ../4-create-actions/login.reducer.ts ./login.reducer-define-state.ts only

</details>

## Problem 2: TODO

TODO: refactor this since this is just copy and paste from the draft

Now that our Actions are defined, we need to set up the Auth State and its Initial State to enable to perform updates to the state later.

We’ll define the following members of the Auth’s State interface:

- `userId: string | null`;
- `username: string | null`;
- `token: string | null`;

As for the `initialState`, members should start with `null` values.

## P2: What You Need to Know

TODO: refactor this since this is just copy and paste from the draft

NgRx schematics generated an empty State interface and an `initialState` variable of type `State`.

--Show login.reducer.ts here--

Update the `State` interface and the `initialState` variable to match requirements.

## P2: Solution

<details>
<summary>src/app/store/login/login.reducer.ts</summary>

@diff ./login.reducer-define-state.ts ./login.reducer-initial-state.ts only

</details>

## Problem 3: Create Auth Reducers to Update Auth State

With State interface and an initialState ready, we will modify the reducers generated by NgRx schematics to perform two distinct updates:

- on `loginSuccess` Action, we want the state to be updated with `userId`, `username` and `token` values passed by `loginSuccess` Action;
- on `logout` Action, we want to reset the state to an initial state.

## P3: What You Need to Know

Reducers generated by NgRx schematics:

--todo: show initial reducer--

Reducers should always return a new state. We are responsible for making sure that a reducer returns a new object instance that represents the State.

An example of an Action that returns a new state:

```ts
on(CounterActions.count, (state) => ({
    ...state,
    count: state.count + 1
}))
```

## P3: Solution

<details>
<summary>src/app/store/login/login.reducer.ts</summary>

@diff ./login.reducer-initial-state.ts ./login.reducer-on-login-success.ts only

</details>

## Problem 4: TODO

TODO

## P4: What You Need to Know

TODO

## P4: Solution

<details>
<summary>src/app/store/login/login.reducer.ts</summary>

@diff ./login.reducer-on-login-success.ts ./login.reducer.ts only

</details>

> **Wrap-up**: By the end of this part, your code should match [this branch](https://github.com/bitovi/angular-ngrx-chat/tree/create-reducer).You can also compare the [code changes for our solution to this part](https://github.com/bitovi/angular-ngrx-chat/compare/test-redirect-effects...create-reducer) on GitHub.
